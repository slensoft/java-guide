<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../css/wolai.css"/><title>Spring - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="small-font"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="Spring" class="main-title"></div></div></header><article><details class="wolai-block"><summary><div class="marker"></div><span>概念</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>一般来说我们说的<span class="jill"></span>Spring<span class="jill"></span>指代的是<span class="jill"></span>Spring&nbsp;Framework。他是一个轻量级的非侵入性的框架。用于提升我们开发的效率</span><span class="gray"><em>（非侵入性：使用该框架不需要继承或者实现框架里面的类和接口）</em></span></li><li><div class="marker"></div><span>Spring&nbsp;有很多模块，使用这些模块能够提高我们的开发效率。</span><span class="gray"><em>（</em></span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#iGu311m2so7QYM1RKHE7q" class="wolai-bi-link"><span class="gray"><span class="embed-jiu embed-toggle"></span><span>6<span class="jill"></span>大特征</span><em></em></span></a></span><span class="gray"><em>）</em></span></li><li><div class="marker"></div><span>主要最常用的模块如下：</span><ul class="wolai-block"><li><div class="marker"></div><span>首先是<span class="jill"></span>spring-core<span class="jill"></span>模块，它提供了<span class="jill"></span>IoC<span class="jill"></span>依赖注入功能。</span></li><li><div class="marker"></div><span>然后是<span class="jill"></span>spring-aop<span class="jill"></span>模块，提供了<span class="jill"></span>AOP<span class="jill"></span>面向切面编程实现。</span></li><li><div class="marker"></div><span>Spring<span class="jill"></span>的优点</span><span>主要就是<span class="jill"></span>IoC<span class="jill"></span>和<span class="jill"></span>AOP</span></li></ul></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>6<span class="jill"></span>大特征</span></summary><ol class="wolai-block"><li><div class="marker"></div><span><strong>核心技术</strong></span><span>&nbsp;：依赖注入(DI)，AOP，事件，资源，i18n，验证，数据绑定，类型转换，SpEL。</span></li><li><div class="marker"></div><span><strong>测试</strong></span><span>&nbsp;：模拟对象，TestContext<span class="jill"></span>框架，Spring&nbsp;MVC&nbsp;测试，WebTestClient。</span></li><li><div class="marker"></div><span><strong>数据访问</strong></span><span>&nbsp;：事务，DAO<span class="jill"></span>支持，JDBC，ORM，编组<span class="jill"></span>XML。<br/></span></li><li><div class="marker"></div><span><strong>Web<span class="jill"></span>支持</strong></span><span>&nbsp;:&nbsp;Spring&nbsp;MVC<span class="jill"></span>和<span class="jill"></span>Spring&nbsp;WebFlux&nbsp;Web<span class="jill"></span>框架。<br/></span></li><li><div class="marker"></div><span><strong>集成</strong></span><span>&nbsp;：远程处理，JMS，JCA，JMX，电子邮件，任务，调度，缓存。<br/></span></li><li><div class="marker"></div><span><strong>语言</strong></span><span>&nbsp;：Kotlin，Groovy，动态语言。</span></li></ol><blockquote class="wolai-block"><span>Features<br/>*&nbsp;&nbsp;&nbsp;</span><span><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html"><span>Core&nbsp;technologies</span></a></span><span>:&nbsp;dependency&nbsp;injection,&nbsp;events,&nbsp;resources,&nbsp;i18n,&nbsp;validation,&nbsp;data&nbsp;binding,&nbsp;type&nbsp;conversion,&nbsp;SpEL,&nbsp;AOP.<br/>*&nbsp;&nbsp;&nbsp;</span><span><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/testing.html"><span>Testing</span></a></span><span>:&nbsp;mock&nbsp;objects,&nbsp;TestContext&nbsp;framework,&nbsp;Spring&nbsp;MVC&nbsp;Test,&nbsp;.</span><span><code>WebTestClient<br/></code></span><span>*&nbsp;&nbsp;&nbsp;</span><span><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/data-access.html"><span>Data&nbsp;Access</span></a></span><span>:&nbsp;transactions,&nbsp;DAO&nbsp;support,&nbsp;JDBC,&nbsp;ORM,&nbsp;Marshalling&nbsp;XML.<br/>*&nbsp;&nbsp;&nbsp;</span><span><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html"><span>Spring&nbsp;MVC</span></a></span><span>&nbsp;and&nbsp;</span><span><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html"><span>Spring&nbsp;WebFlux</span></a></span><span>&nbsp;web&nbsp;frameworks.<br/>*&nbsp;&nbsp;&nbsp;</span><span><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/integration.html"><span>Integration</span></a></span><span>:&nbsp;remoting,&nbsp;JMS,&nbsp;JCA,&nbsp;JMX,&nbsp;email,&nbsp;tasks,&nbsp;scheduling,&nbsp;cache.<br/>*&nbsp;&nbsp;&nbsp;</span><span><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/languages.html"><span>Languages</span></a></span><span>:&nbsp;Kotlin,&nbsp;Groovy,&nbsp;dynamic&nbsp;languages.</span></blockquote><details class="wolai-block"><summary><div class="marker"></div><span>Spring4<span class="jill"></span>核心图</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>该图是老版本的图，新版本有所改动</span></li></ul><div class="wolai-block wolai-center"><figure><img src="media/image.png" style="width: 557px"/></figure></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>核心</span><span>模块</span><span>（Core）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>IOC<span class="jill"></span>容器（控制反转<span class="jill"></span>Inversion&nbsp;of&nbsp;Control）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>概念</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>控制反转<span class="jill"></span>IoC(Inversion&nbsp;of&nbsp;Control)，是一种设计思想！</span></li><li><div class="marker"></div><span>Spring<span class="jill"></span>针对<span class="jill"></span>IoC<span class="jill"></span>思想做了实现，也就是<span class="jill"></span>DI（依赖注入是实现<span class="jill"></span>IoC<span class="jill"></span>思想的一种方法）</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>举例</span><span>DI（依赖注入<span class="jill"></span>Dependency&nbsp;Injection）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>IoC<span class="jill"></span>举例（电脑和用户外接设备）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>我用电脑和用户外接设备解释控制反转</span></li><li><div class="marker"></div><span>对于电脑而言，他无法控制用户将任何外界设备插入电脑，此时电脑就已经将（插入外接设备）控制权转交给了用户（反转），具体插入什么设备的控制权是在用户手上。所以对于电脑而言这就叫控制反转。</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>DI<span class="jill"></span>举例<span class="jill"></span>1（还是承接上面的例子）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>承接上面的举例。</span></li><li><div class="marker"></div><span>电脑也不知道用户会插入什么设备，但是不管你插入什么设备，电脑都会将你需要的（依赖的）设备识别出来，供你使用（使用时就已经注入）。这就是依赖注入。</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>DI<span class="jill"></span>举例<span class="jill"></span>2（Spring<span class="jill"></span>中的<span class="jill"></span>DI？）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>在没有使用<span class="jill"></span>Spring<span class="jill"></span>之前，我们都是直接申明变量，然后将<span class="jill"></span>new<span class="jill"></span>出来的对象赋值给申明的变量。</span></li><li><div class="marker"></div><span>在使用<span class="jill"></span>Spring<span class="jill"></span>之后，我们可以通过</span><span><strong>配置文件</strong></span><span>或者</span><span><strong>注解</strong></span><span>，将相关对象存放到<span class="jill"></span>Spring<span class="jill"></span>中的<span class="jill"></span>IoC<span class="jill"></span>容器中，在程序运行期间需要某个对象的时候，IoC<span class="jill"></span>容器会动态地将依赖关系注入所需要的对象。</span></li></ul></details></details><details class="wolai-block"><summary><div class="marker"></div><span>工作原理图</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>Spring<span class="jill"></span>中将所有对象都放入<span class="jill"></span>IoC<span class="jill"></span>容器中，可以说<span class="jill"></span>ApplicationContext<span class="jill"></span>接口就代表了<span class="jill"></span>IoC<span class="jill"></span>容器（也可以叫做上下文）。该接口有好几种实现，&nbsp;从而实现<span class="jill"></span>XML<span class="jill"></span>配置，也可以使用<span class="jill"></span>Java<span class="jill"></span>注解进行配置。</span></li></ul><div class="wolai-block wolai-center"><figure><img src="media/image_1.png" style="width: 498px"/></figure></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>IoC<span class="jill"></span>容器核心架构</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>流程图片</span></summary><div class="wolai-block wolai-center"><figure><img src="media/image_2.png" style="width: 644px"/></figure></div><div class="wolai-block wolai-center"><figure><img src="media/image_3.png" style="width: 644px"/></figure></div><div class="wolai-block wolai-center"><figure><img src="media/image_4.png" style="width: 644px"/></figure></div></details><details class="wolai-block"><summary><div class="marker"></div><span>Bean<span class="jill"></span>对象生命周期</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>1.实例化</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>首先是对象的实例化</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>Bean<span class="jill"></span>实例化三种方式</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>实例化对象<span class="jill"></span>Bean<span class="jill"></span>也就是将<span class="jill"></span>bean<span class="jill"></span>放入<span class="jill"></span>IoC<span class="jill"></span>容器。（这里实例化对象等于<span class="jill"></span>bean）</span></li><li><div class="marker"></div><span>三种方式：构造器（反射获取）、静态工厂方法、实例工厂（工厂类）。</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>xml<span class="jill"></span>代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="XML" class="marker"></div><pre>    <span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span> 第一种：使用构造器实例化bean对象 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"user1"</span> class<span class="token operator">=</span><span class="token string">"com.shengjava.demo.pojo.User"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>

    <span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span> 第二种：静态工厂方法实例化bean对象 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"user2"</span> class<span class="token operator">=</span><span class="token string">"com.shengjava.demo.factory.UserFactory"</span>
          factory<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">"getInstance"</span><span class="token operator">/</span><span class="token operator">></span>

    <span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span> 第三种：实例工厂方法实例化bean对象 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"customer"</span>
          factory<span class="token operator">-</span>bean<span class="token operator">=</span><span class="token string">"customerFactory"</span>
          factory<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">"getInstance"</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span> 需要创建出实例工厂 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"customerFactory"</span> class<span class="token operator">=</span><span class="token string">"com.shengjava.demo.factory.CustomerFactory"</span><span class="token operator">/</span><span class="token operator">></span></pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=1.3.2. 实例化 bean"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;1.3.2.&nbsp;实例化&nbsp;bean</span></a></span><span>&nbsp;</span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://blog.csdn.net/weixin_44034328/article/details/105326861"><span>【Spring】（3.1）实例化<span class="jill"></span>bean<span class="jill"></span>对象（三种方式）_长生的梦呓</span></a></span></div></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>2.对属性进行注入</span></summary><div class="wolai-block wolai-text"><div><span>可能会产生循环依赖问题。</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#ig4czZVYii5byj5FZQ4oXj" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>Spring<span class="jill"></span>如何解决循环依赖的？</span></span></a></span></div></div><div class="wolai-block wolai-pre"><div data-lang="XML" class="marker"></div><pre>    <span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span> xml实现 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span> 没有使用自动装配之前，我们需要自己手动注入对象到People对象的属性中（使用People类的无参构造器） <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"peopleBefore"</span> class<span class="token operator">=</span><span class="token string">"com.shengjava.demo.pojo.People"</span> init<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">"getDog"</span> destroy<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">"getDog"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"cat"</span> ref<span class="token operator">=</span><span class="token string">"cat"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"dog"</span> ref<span class="token operator">=</span><span class="token string">"dog"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span></pre></div><div class="wolai-block wolai-text"><div><span>注解实现：@Autowired</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span>Spring<span class="jill"></span>如何解决循环依赖的？</span></summary><div class="wolai-block wolai-text"><div><span></span><br/></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>3.初始化</span></summary><div class="wolai-block wolai-pre"><div data-lang="XML" class="marker"></div><pre><span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span> xml实现 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span>
<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"user1"</span> class<span class="token operator">=</span><span class="token string">"com.t.User"</span> init<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">"initXxx()"</span> <span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span></pre></div><div class="wolai-block wolai-text"><div><span>注解实现：</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#axtNNKJuCJzBLnbUiQYQvN" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>@PostConstruct、@PreDestroy（构建、销毁执行）</span></span></a></span></div></div><div class="wolai-block wolai-text"><div><span>扩展：也可以通过实现<span class="jill"></span>InitializingBean<span class="jill"></span>接口。</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>4.销毁</span></summary><div class="wolai-block wolai-pre"><div data-lang="XML" class="marker"></div><pre><span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span> xml实现 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">></span>
<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"user1"</span> class<span class="token operator">=</span><span class="token string">"com.t.User"</span> destroy<span class="token operator">-</span>method<span class="token operator">=</span><span class="token string">"destroyXxx()"</span> <span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span></pre></div><div class="wolai-block wolai-text"><div><span>注解实现：</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#axtNNKJuCJzBLnbUiQYQvN" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>@PostConstruct、@PreDestroy（构建、销毁执行）</span></span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.bilibili.com/video/BV1S5411K7Df"><span>Spring&nbsp;IOC<span class="jill"></span>容器核心架构原理</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>Bean<span class="jill"></span>依赖注入（对象属性的依赖注入）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>基于构造器</span></li><li><div class="marker"></div><span>基于<span class="jill"></span>Setter<span class="jill"></span>方法</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>依赖详细配置</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>依赖关系详细配置请参考：</span><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=1.4.2. 依赖性和详细配置"><span>1.4.2.&nbsp;依赖性和详细配置</span></a></span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=1.4.1. 依赖注入"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;1.4.1.&nbsp;依赖注入</span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://blog.csdn.net/weixin_44034328/article/details/105327341"><span>【Spring&nbsp;+&nbsp;Spring&nbsp;MVC&nbsp;+&nbsp;MyBatis】文章目录_长生的梦呓</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>Bean<span class="jill"></span>作用域范围（实例化对象的<span class="jill"></span>6<span class="jill"></span>大作用域）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>singleton（单例）</span></li><li><div class="marker"></div><span>prototype（原型）</span></li><li><div class="marker"></div><span>request（请求）</span></li><li><div class="marker"></div><span>session（会话）</span></li><li><div class="marker"></div><span>application（应用）</span></li><li><div class="marker"></div><span>websocket</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=1.5. bean 范围"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;1.5.&nbsp;bean&nbsp;范围</span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://blog.csdn.net/weixin_44034328/article/details/105326908"><span>【Spring】（3.2）bean<span class="jill"></span>对象的作用域_长生的梦呓</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>注解</span><span>配置</span><span>容器</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>使用<span class="jill"></span>Spring<span class="jill"></span>不一定要用<span class="jill"></span>XML<span class="jill"></span>配置文件，也可以使用注解！</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>Bean<span class="jill"></span>配置</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Configuration（配置）</span></summary><div class="wolai-block wolai-text"><div><span>声明当前类为配置类，相当于<span class="jill"></span>xml<span class="jill"></span>形式的<span class="jill"></span>Spring<span class="jill"></span>配置（类上）</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span>举例代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
@<span class="token function">MapperScan</span><span class="token punctuation">(</span><span class="token string">"com.xxx.question.mapper"</span><span class="token punctuation">)</span>
public class MybatisPlusConfig {
    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 分页插件配置
     <span class="token operator">*</span><span class="token operator">/</span>
    <span class="token variable">@Bean</span>
    public PaginationInterceptor <span class="token function">paginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> {
        PaginationInterceptor paginationInterceptor <span class="token operator">=</span> new <span class="token function">PaginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        paginationInterceptor<span class="token punctuation">.</span><span class="token function">setCountSqlParser</span><span class="token punctuation">(</span>new <span class="token function">JsqlParserCountOptimize</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        return paginationInterceptor<span class="token comment" spellcheck="true">;</span>
    }
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>扩展</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>下面这个注解<span class="jill"></span>SpringBoot<span class="jill"></span>中的注解</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>@WishlyConfiguration</span></summary><div class="wolai-block wolai-text"><div><span>为<span class="jill"></span>@Configuration<span class="jill"></span>与<span class="jill"></span>@ComponentScan<span class="jill"></span>的组合注解，可以替代这两个注解</span></div></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@Bean（注册<span class="jill"></span>bean）</span></summary><div class="wolai-block wolai-text"><div><span>注解在方法上，声明当前方法的返回值为一个<span class="jill"></span>bean，替代<span class="jill"></span>xml<span class="jill"></span>中的方式（方法上）</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Import（导入）</span></summary><div class="wolai-block wolai-text"><div><span>用来导入其他的有<span class="jill"></span>@Configuration<span class="jill"></span>注解的配置类。</span></div></div><div class="wolai-block wolai-text"><div><span>也可以直接再配置类中导入一个类，导入后就实例化<span class="jill"></span>bean<span class="jill"></span>放到<span class="jill"></span>IoC<span class="jill"></span>容器中了。</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@ComponentScan（组件扫描）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>用于对<span class="jill"></span>Component<span class="jill"></span>进行扫描，相当于<span class="jill"></span>xml<span class="jill"></span>中的<span class="jill"></span>context:component-scan/（类上）</span></li><li><div class="marker"></div><span>也就是扫描指定包下面的相关</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#ehBdXKtMoP4qi7qmsHqHRF" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>Bean<span class="jill"></span>声明注解</span></span></a></span><span>。使用了例如<span class="jill"></span>@Component<span class="jill"></span>注解的类，都会实例化对象并放入<span class="jill"></span>IoC<span class="jill"></span>容器中交给<span class="jill"></span>Spring<span class="jill"></span>统一管理。</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>Bean<span class="jill"></span>声明注解</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Component（组件）</span></summary><div class="wolai-block wolai-text"><div><span>组件，没有明确的角色。</span></div></div><ul class="wolai-block"><li><div class="marker"></div><span>这个几个注解都差不多，都是注册<span class="jill"></span>bean<span class="jill"></span>到<span class="jill"></span>IoC<span class="jill"></span>容器中，只不过有语义上的区别。底层使用的都是<span class="jill"></span>@Component<span class="jill"></span>注解。</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>@Service（服务业务）</span></summary><div class="wolai-block wolai-text"><div><span>在业务逻辑层使用（service<span class="jill"></span>业务层）</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Repository（存储仓库）</span></summary><div class="wolai-block wolai-text"><div><span><code>@Repository</code></span><span>注解&nbsp;是满足存储库的角色或构造型(也称为数据访问对象或&nbsp;DAO)的任何类的标记。</span></div></div><div class="wolai-block wolai-text"><div><span>在数据访问层使用（dao<span class="jill"></span>数据层）</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Controller（控制器）</span></summary><div class="wolai-block wolai-text"><div><span>在展现层使用，控制器的声明（controller<span class="jill"></span>控制层）</span></div></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>注册<span class="jill"></span>Bean<span class="jill"></span>优先级</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Primary（设置<span class="jill"></span>bean<span class="jill"></span>优先注入）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>当某个类型的对象有多个时，会优先注入特定的<span class="jill"></span>bean<span class="jill"></span>对象。</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>代码示例</span></summary><div class="wolai-block wolai-text"><div><span>在使用<span class="jill"></span>@</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#cecJQLqTf4FqefhtAzJfNr" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>@Autowired（自动装配）</span></span></a></span><span>注解注入<span class="jill"></span>MovieCatalog&nbsp;时，则会预先注入有&nbsp;@Primary<span class="jill"></span>注解的<span class="jill"></span>firstMovieCatalog()方法中的对象。</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
public class MovieConfiguration {

    <span class="token variable">@Bean</span>
    <span class="token variable">@Primary</span>
    public MovieCatalog <span class="token function">firstMovieCatalog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> { <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> }

    <span class="token variable">@Bean</span>
    public MovieCatalog <span class="token function">secondMovieCatalog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> { <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> }

    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@DependsOn（依赖项注册）</span></summary><div class="wolai-block wolai-text"><div><span>用来控制<span class="jill"></span>bean<span class="jill"></span>加载顺序，指定某些<span class="jill"></span>bean<span class="jill"></span>要优先于加载其他<span class="jill"></span>bean。也就是说如果<span class="jill"></span>bean<span class="jill"></span>注册时，如果方法上标记了这个注解，那么他会晚于指定的<span class="jill"></span>bean<span class="jill"></span>加载。</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span>代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>    <span class="token variable">@Bean</span>
    @<span class="token function">DependsOn</span><span class="token punctuation">(</span><span class="token string">"eventListener"</span><span class="token punctuation">)</span>
    public EventPublisherBean eventPublisherBean <span class="token punctuation">(</span><span class="token punctuation">)</span> {
        return new <span class="token function">EventPublisherBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    @<span class="token function">Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"eventListener"</span><span class="token punctuation">)</span>
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token variable">@Lazy</span>
    public EventListenerBean eventListenerBean <span class="token punctuation">(</span><span class="token punctuation">)</span> {
        return new <span class="token function">EventListenerBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }  </pre></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre># 上面实例化时优先级如下
EventListenerBean 
EventPublisherBean </pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://blog.csdn.net/neweastsun/article/details/78775371"><span>使用<span class="jill"></span>Spring&nbsp;@DependsOn<span class="jill"></span>控制<span class="jill"></span>bean<span class="jill"></span>加载顺序</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@PostConstruct、@PreDestroy（构建、销毁执行）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>相当于<span class="jill"></span>xml<span class="jill"></span>配置文件中的</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#5so7dohEcs6ZXo5DgbVDWN" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>3.初始化</span></span></a></span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#cJJ1HRW3NkjSZWaEauN1Eg" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>4.销毁</span></span></a></span></li><li><div class="marker"></div><span>@PostConstruct：由<span class="jill"></span>JSR-250<span class="jill"></span>提供，在构造函数执行完之后执行，等价于<span class="jill"></span>xml<span class="jill"></span>配置文件中<span class="jill"></span>bean<span class="jill"></span>的<span class="jill"></span>initMethod，但是比<span class="jill"></span>init<span class="jill"></span>方法更靠前执行。</span></li><li><div class="marker"></div><span>@PreDestroy：由<span class="jill"></span>JSR-250<span class="jill"></span>提供，在<span class="jill"></span>Bean<span class="jill"></span>销毁之前执行，等价于<span class="jill"></span>xml<span class="jill"></span>配置文件中<span class="jill"></span>bean<span class="jill"></span>的<span class="jill"></span>destroyMethod，但是比<span class="jill"></span>destroy<span class="jill"></span>方法更靠后执行。</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>流程图</span></summary><div class="wolai-block wolai-center"><figure><img src="media/image_5.png" style="width: 228px"/></figure></div></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.jianshu.com/p/98cf7d8b9ec3"><span>@PostConstruct&nbsp;-&nbsp;简书</span></a></span></div></div><div class="wolai-block wolai-text"><div><span>实际场景：</span><span><a href="https://zhuanlan.zhihu.com/p/126749381"><span>@PostConstruct<span class="jill"></span>注解</span></a></span></div></div></details></details></details><details class="bg-default wolai-block"><summary><div class="marker"></div><span>作用域范围（</span><span>@Scope</span><span>）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>设置<span class="jill"></span>Spring<span class="jill"></span>容器如何新建<span class="jill"></span>Bean<span class="jill"></span>实例（方法上，得有<span class="jill"></span>@Bean），参数值有<span class="jill"></span>6<span class="jill"></span>种不同的作用域。</span></li><li><div class="marker"></div><span>Singleton&nbsp;（单例,一个<span class="jill"></span>Spring<span class="jill"></span>容器中只有一个<span class="jill"></span>bean<span class="jill"></span>实例，默认模式）,<br/></span></li><li><div class="marker"></div><span>Protetype&nbsp;（每次调用新建一个<span class="jill"></span>bean）,<br/></span></li><li><div class="marker"></div><span>Request&nbsp;（web<span class="jill"></span>项目中，给每个<span class="jill"></span>http&nbsp;request<span class="jill"></span>新建一个<span class="jill"></span>bean）,<br/></span></li><li><div class="marker"></div><span>Session&nbsp;（web<span class="jill"></span>项目中，给每个<span class="jill"></span>http&nbsp;session<span class="jill"></span>新建一个<span class="jill"></span>bean）,</span></li><li><div class="marker"></div><span>GlobalSession（给每一个&nbsp;global&nbsp;http&nbsp;session<span class="jill"></span>新建一个<span class="jill"></span>Bean<span class="jill"></span>实例）</span></li></ul></details></details><details class="wolai-block"><summary><div class="marker"></div><span>Bean<span class="jill"></span>注入</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Autowired（自动装配）</span></summary><div class="wolai-block wolai-text"><div><span>由<span class="jill"></span>Spring<span class="jill"></span>提供。用于自动将所需的<span class="jill"></span>bean<span class="jill"></span>对象装配到声明的变量中，默认是<span class="jill"></span>byType<span class="jill"></span>进行注入相关<span class="jill"></span>bean。可以与</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#PhVACoNzfZtndPLztMxSz" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>@Qualifier（限定）</span></span></a></span><span>搭配使用。</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Qualifier（限定）</span></summary><div class="wolai-block wolai-text"><div><span>可以用于<span class="jill"></span>bean<span class="jill"></span>的歧义性问题。</span></div></div><div class="wolai-block wolai-text"><div><span>例如：使用<span class="jill"></span>@Autowired<span class="jill"></span>注解时，默认时按照类型（byType）进行注入<span class="jill"></span>bean<span class="jill"></span>对象的，此时就可以使用该注解，指定的<span class="jill"></span>bean<span class="jill"></span>名称，将特定<span class="jill"></span>bean<span class="jill"></span>名称的对象注入。</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Resource（资源）</span></summary><div class="wolai-block wolai-text"><div><span>由<span class="jill"></span>JSR-250（Java&nbsp;Specification&nbsp;Requests）提供。作用和<span class="jill"></span>@Autowired<span class="jill"></span>类似不一样的是，该注解默认是使用<span class="jill"></span>byName<span class="jill"></span>进行注入相关<span class="jill"></span>bean。</span></div></div><div class="wolai-block wolai-text"><div><span>该注解可以指定名字。而<span class="jill"></span>@Autowired<span class="jill"></span>不行，只能搭配<span class="jill"></span>@Qualifier<span class="jill"></span>使用。</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span>举例代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">/</span><span class="token operator">/</span> 指定名称对象
@<span class="token function">Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"testObj"</span><span class="token punctuation">)</span>
private String testObj<span class="token comment" spellcheck="true">;</span>
<span class="token operator">/</span><span class="token operator">/</span> 指定名称对象
<span class="token variable">@Autowired</span>
@<span class="token function">Qualifier</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"testObj"</span><span class="token punctuation">)</span>
private String testObj<span class="token comment" spellcheck="true">;</span>

</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@Inject（注入，很少用）</span></summary><div class="wolai-block wolai-text"><div><span>由<span class="jill"></span>JSR-330<span class="jill"></span>提供。</span></div></div><div class="wolai-block wolai-text"><div><span>可以使用这个注解代替</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#cecJQLqTf4FqefhtAzJfNr" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>@Autowired（自动装配）</span></span></a></span><span>，作用一样。不过需要引入<span class="jill"></span>javax.inject<span class="jill"></span>依赖。</span></div></div><div class="wolai-block wolai-text"><div><span>可以搭配<span class="jill"></span>@Named(&quot;xxx&quot;)指定名称使用，达到同样效果。</span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>配置文件读取</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Value（Spring<span class="jill"></span>表达式语言<span class="jill"></span>SpEL）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>用于读取配置文件信息，可能是<span class="jill"></span>xml、yaml、properties</span></li><li><div class="marker"></div><span>基本语法：@Value(&quot;${<span class="jill"></span>配置文件变量值<span class="jill"></span>}&quot;)</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=4.%20Spring%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E8%A8%80(SpEL)"><span>Spring&nbsp;表达式语言(SpEL)</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@PropertySource</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>@PropertySource&nbsp;和&nbsp;@ConfigurationProperties&nbsp;组合使用，可以将属性文件与一个<span class="jill"></span>Java<span class="jill"></span>类绑定，将属性文件中的变量值注入到该<span class="jill"></span>Java&nbsp;类的成员变量中。</span></li><li><div class="marker"></div><span>用于读取文件源，将文件中的变量值读取到配置对象中</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>举例代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Component</span>
@<span class="token function">ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"gen"</span><span class="token punctuation">)</span>
@<span class="token function">PropertySource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> { <span class="token string">"classpath:generator.yml"</span> }<span class="token punctuation">)</span>
public class GenConfig
{
    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 作者 <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> String author<span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 生成包路径 <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> String packageName<span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 自动去除表前缀，默认是<span class="token boolean">false</span> <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> boolean autoRemovePre<span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 表前缀<span class="token punctuation">(</span>类名不会包含表前缀<span class="token punctuation">)</span> <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> String tablePrefix<span class="token comment" spellcheck="true">;</span>

    public <span class="token keyword">static</span> String <span class="token function">getAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return author<span class="token comment" spellcheck="true">;</span>
    }

    @<span class="token function">Value</span><span class="token punctuation">(</span><span class="token string">"${author}"</span><span class="token punctuation">)</span>
    public void <span class="token function">setAuthor</span><span class="token punctuation">(</span>String author<span class="token punctuation">)</span>
    {
        GenConfig<span class="token punctuation">.</span>author <span class="token operator">=</span> author<span class="token comment" spellcheck="true">;</span>
    }

    public <span class="token keyword">static</span> String <span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return packageName<span class="token comment" spellcheck="true">;</span>
    }

    @<span class="token function">Value</span><span class="token punctuation">(</span><span class="token string">"${packageName}"</span><span class="token punctuation">)</span>
    public void <span class="token function">setPackageName</span><span class="token punctuation">(</span>String packageName<span class="token punctuation">)</span>
    {
        GenConfig<span class="token punctuation">.</span>packageName <span class="token operator">=</span> packageName<span class="token comment" spellcheck="true">;</span>
    }

    public <span class="token keyword">static</span> boolean <span class="token function">getAutoRemovePre</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return autoRemovePre<span class="token comment" spellcheck="true">;</span>
    }

    @<span class="token function">Value</span><span class="token punctuation">(</span><span class="token string">"${autoRemovePre}"</span><span class="token punctuation">)</span>
    public void <span class="token function">setAutoRemovePre</span><span class="token punctuation">(</span>boolean autoRemovePre<span class="token punctuation">)</span>
    {
        GenConfig<span class="token punctuation">.</span>autoRemovePre <span class="token operator">=</span> autoRemovePre<span class="token comment" spellcheck="true">;</span>
    }

    public <span class="token keyword">static</span> String <span class="token function">getTablePrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return tablePrefix<span class="token comment" spellcheck="true">;</span>
    }

    @<span class="token function">Value</span><span class="token punctuation">(</span><span class="token string">"${tablePrefix}"</span><span class="token punctuation">)</span>
    public void <span class="token function">setTablePrefix</span><span class="token punctuation">(</span>String tablePrefix<span class="token punctuation">)</span>
    {
        GenConfig<span class="token punctuation">.</span>tablePrefix <span class="token operator">=</span> tablePrefix<span class="token comment" spellcheck="true">;</span>
    }
}
</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@ConfigurationProperties（SpringBoot</span><span><a href="https://www.wolai.com/wau5vfbhpiZD9zoAmuaH3Q#u8v2iUqgkUki3twEaeNbky" class="wolai-bi-link"><span>原链接丢失</span></a></span><span>）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>用于读取配置文件信息，可能是<span class="jill"></span>yaml、properties<span class="jill"></span>配置文件</span></li><li><div class="marker"></div><span>一般在配置类上读取配置文件信息</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>举例代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Component</span>
@<span class="token function">ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"ruoyi"</span><span class="token punctuation">)</span>
public class RuoYiConfig
{
    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 项目名称 <span class="token operator">*</span><span class="token operator">/</span>
    private <span class="token keyword">static</span> String name<span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 版本 <span class="token operator">*</span><span class="token operator">/</span>
    private <span class="token keyword">static</span> String version<span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 版权年份 <span class="token operator">*</span><span class="token operator">/</span>
    private <span class="token keyword">static</span> String copyrightYear<span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 实例演示开关 <span class="token operator">*</span><span class="token operator">/</span>
    private <span class="token keyword">static</span> boolean demoEnabled<span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 上传路径 <span class="token operator">*</span><span class="token operator">/</span>
    private <span class="token keyword">static</span> String profile<span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 获取地址开关 <span class="token operator">*</span><span class="token operator">/</span>
    private <span class="token keyword">static</span> boolean addressEnabled<span class="token comment" spellcheck="true">;</span>

    public <span class="token keyword">static</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return name<span class="token comment" spellcheck="true">;</span>
    }

    public void <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span>
    {
        RuoYiConfig<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token comment" spellcheck="true">;</span>
    }

    public <span class="token keyword">static</span> String <span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return version<span class="token comment" spellcheck="true">;</span>
    }

    public void <span class="token function">setVersion</span><span class="token punctuation">(</span>String version<span class="token punctuation">)</span>
    {
        RuoYiConfig<span class="token punctuation">.</span>version <span class="token operator">=</span> version<span class="token comment" spellcheck="true">;</span>
    }

    public <span class="token keyword">static</span> String <span class="token function">getCopyrightYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return copyrightYear<span class="token comment" spellcheck="true">;</span>
    }

    public void <span class="token function">setCopyrightYear</span><span class="token punctuation">(</span>String copyrightYear<span class="token punctuation">)</span>
    {
        RuoYiConfig<span class="token punctuation">.</span>copyrightYear <span class="token operator">=</span> copyrightYear<span class="token comment" spellcheck="true">;</span>
    }

    public <span class="token keyword">static</span> boolean <span class="token function">isDemoEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return demoEnabled<span class="token comment" spellcheck="true">;</span>
    }

    public void <span class="token function">setDemoEnabled</span><span class="token punctuation">(</span>boolean demoEnabled<span class="token punctuation">)</span>
    {
        RuoYiConfig<span class="token punctuation">.</span>demoEnabled <span class="token operator">=</span> demoEnabled<span class="token comment" spellcheck="true">;</span>
    }

    public <span class="token keyword">static</span> String <span class="token function">getProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return profile<span class="token comment" spellcheck="true">;</span>
    }

    public void <span class="token function">setProfile</span><span class="token punctuation">(</span>String profile<span class="token punctuation">)</span>
    {
        RuoYiConfig<span class="token punctuation">.</span>profile <span class="token operator">=</span> profile<span class="token comment" spellcheck="true">;</span>
    }

    public <span class="token keyword">static</span> boolean <span class="token function">isAddressEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return addressEnabled<span class="token comment" spellcheck="true">;</span>
    }

    public void <span class="token function">setAddressEnabled</span><span class="token punctuation">(</span>boolean addressEnabled<span class="token punctuation">)</span>
    {
        RuoYiConfig<span class="token punctuation">.</span>addressEnabled <span class="token operator">=</span> addressEnabled<span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 获取头像上传路径
     <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> String <span class="token function">getAvatarPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return <span class="token function">getProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/avatar"</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 获取下载路径
     <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> String <span class="token function">getDownloadPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return <span class="token function">getProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/download/"</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 获取上传路径
     <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> String <span class="token function">getUploadPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    {
        return <span class="token function">getProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/upload"</span><span class="token comment" spellcheck="true">;</span>
    }
}</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@Profile（不常用）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>可以指定一个或多个配置文件，搭配</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#gjpYN7Aiiw5fT9Yv67AkjA" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>@Value（Spring<span class="jill"></span>表达式语言<span class="jill"></span>SpEL）</span></span></a></span><span>读取配置文件中的数据。</span></li><li><div class="marker"></div><span>用于标注生产环境、开发环境、测试环境。很少使用</span></li></ul></details></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=1.9. 基于注解的容器配置"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;基于注解的容器配置</span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://blog.csdn.net/IT_faquir/article/details/78025203"><span>Spring<span class="jill"></span>注解大全</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span>&nbsp;</span><span><a href="https://www.cnblogs.com/superjt/p/4311577.html"><span>Spring<span class="jill"></span>的<span class="jill"></span>IOC<span class="jill"></span>原理</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>AOP（面向切面编程<span class="jill"></span>Aspect&nbsp;Oriented&nbsp;Programming）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>概念</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>面向切面编程，通过预编译方式和运行期间动态代理实现程序功能的统一维护的一种技术。</span></li><li><div class="marker"></div><span>目的：AOP<span class="jill"></span>能够将那些与业务无关，却为业务模块所共同调用的逻辑或责任（例如事务处理、日志管理、权限控制等）封装起来，便于减少系统的重复代码，降低模块间的耦合度，并有利于未来的可拓展性和可维护性。</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>示例图</span></summary><div class="wolai-block wolai-center"><figure><img src="media/image_6.png" style="width: 440px"/></figure></div><div class="wolai-block wolai-center"><figure><img src="media/image_7.png" style="width: 528px"/></figure></div><div class="wolai-block wolai-center"><figure><img src="media/image_8.png" style="width: 508px"/></figure></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>Spring&nbsp;AOP<span class="jill"></span>作用</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>提供声明式事务</span></li><li><div class="marker"></div><span>允许用户自定义切面</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>AOP<span class="jill"></span>术语概念</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>Aspect（切面&nbsp;）</span></summary><blockquote class="wolai-block"><span>涉及多个类别的关注点的模块化。</span><span><strong>事务管理</strong></span><span>（事务&nbsp;Management)&nbsp;是企业&nbsp;Java&nbsp;应用程序中横切关注的一个很好的例子。在&nbsp;Spring&nbsp;AOP&nbsp;中，切面是通过使用常规类(</span><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#aop-schema"><span>schema-based&nbsp;approach</span></a></span><span>)或使用</span><span><code>@Aspect</code></span><span>注解(</span><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#aop-ataspectj"><span>@AspectJ&nbsp;style</span></a></span><span>)注解&nbsp;的常规类来实现的。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>切面&nbsp;=&nbsp;切入点&nbsp;+&nbsp;通知，通俗点就是：</span><span><strong>在什么时机，什么地方，做什么增强！</strong></span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>Join&nbsp;point（连接点）</span></summary><blockquote class="wolai-block"><span>在程序执行过程中的一点，例如方法的执行或异常的处理。在&nbsp;Spring&nbsp;AOP&nbsp;中，连接点始终代表方法的执行。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>与切入点匹配的执行点，也就是方法在什么地方执行</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>Advice（通知&nbsp;|&nbsp;建议<span class="jill"></span>|<span class="jill"></span>增强）</span></summary><blockquote class="wolai-block"><span>切面在特定的连接点处采取的操作。</span></blockquote><blockquote class="wolai-block"><span>不同类型的通知包括“around<span class="jill"></span>环绕”，“before<span class="jill"></span>之前”和“after<span class="jill"></span>之后”建议(通知)。包括&nbsp;Spring&nbsp;在内的许多&nbsp;AOP&nbsp;框架都将建议建模为拦截器，并在连接点周围维护一系列拦截器。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>在方法执行的什么实际（when:方法前/方法后/方法前后）做什么（what:增强的功能）</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>Pointcut（切入点）</span></summary><blockquote class="wolai-block"><span>与连接点匹配的谓词。建议与切入点表达式关联，并在与该切入点匹配的任何连接点处运行(例如，执行具有特定名称的方法)。切入点表达式匹配的连接点的概念是&nbsp;AOP&nbsp;的核心，并且&nbsp;Spring&nbsp;默认使用&nbsp;AspectJ&nbsp;切入点表达语言。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>在哪些类，哪些方法上切入（</span><span><strong>where</strong></span><span>）。</span><span>即一组连接点的集合；</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>Target&nbsp;object（目标对象）</span></summary><blockquote class="wolai-block"><span>一个或多个方面建议的对象。也称为“建议对象”。由于&nbsp;Spring&nbsp;AOP&nbsp;是使用运行时代理实现的，因此该对象始终是代理对象。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>目标对象，即真正执行业务的核心逻辑对象；</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>AOP&nbsp;proxy（代理）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>由&nbsp;AOP&nbsp;框架创建的一个对象，用于实现方面协定(建议方法执行等)。在&nbsp;Spring&nbsp;Framework&nbsp;中，AOP&nbsp;代理是&nbsp;JDK&nbsp;动态代理或&nbsp;CGLIB&nbsp;代理。</span></li><li><div class="marker"></div><span>AOP<span class="jill"></span>代理，是客户端持有的增强后的对象引用。</span><span>向目标对象应用通知之后创建的对象</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>Weaving（织入）</span></summary><blockquote class="wolai-block"><span>将方面与其他应用程序类型或对象链接以创建建议的对象。这可以在编译时(例如，使用&nbsp;AspectJ&nbsp;编译器)，加载时或在运行时完成。像其他纯&nbsp;Java&nbsp;AOP&nbsp;框架一样，Spring&nbsp;AOP&nbsp;在运行时执行编织。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>把切面加入到对象，并创建出代理对象的过程。（由&nbsp;Spring&nbsp;来完成）</span></li></ul></details></details><details class="wolai-block"><summary><div class="marker"></div><span>AOP<span class="jill"></span>代理方式（两种）</span></summary><blockquote class="wolai-block"><span>Spring&nbsp;AOP&nbsp;默认将标准&nbsp;JDK&nbsp;动态代理用于&nbsp;AOP&nbsp;代理。这使得可以代理任何接口(或一组接口)。</span></blockquote><blockquote class="wolai-block"><span>Spring&nbsp;AOP&nbsp;也可以使用&nbsp;CGLIB&nbsp;代理。这对于代理类而不是接口是必需的。默认情况下，如果业务对象未实现接口，则使用&nbsp;CGLIB。由于对接口而不是对类进行编程是一种好习惯，因此业务类通常实现一个或多个业务接口。在某些情况下(可能极少发生)，您需要建议未在接口上声明的方法，或者需要将代理对象作为具体类型传递给方法，则可以使用</span><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#aop-proxying"><span>强制使用&nbsp;CGLIB</span></a></span><span>。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>两种代理方式：JDK<span class="jill"></span>动态代理、CGLI<span class="jill"></span>代理</span></li><li><div class="marker"></div><span>1、如果目标对象实现了接口，默认情况下会采用<span class="jill"></span>JDK<span class="jill"></span>的动态代理实现<span class="jill"></span>AOP<br/>2、如果目标对象实现了接口，可以强制使用<span class="jill"></span>CGLIB<span class="jill"></span>实现<span class="jill"></span>AOP<br/>3、如果目标对象没有实现了接口，必须采用<span class="jill"></span>CGLIB<span class="jill"></span>库，spring<span class="jill"></span>会自动在<span class="jill"></span>JDK<span class="jill"></span>动态代理和<span class="jill"></span>CGLIB<span class="jill"></span>之间转换<br/>注：JDK<span class="jill"></span>动态代理要比<span class="jill"></span>cglib<span class="jill"></span>代理执行速度快，但性能不如<span class="jill"></span>cglib<span class="jill"></span>好。所以在选择用哪种代理还是要看具体情况，一般单例模式用<span class="jill"></span>cglib<span class="jill"></span>比较好，具体原因请自行百度。</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>常用注解</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>AOP</span><span>启用</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>Spring<span class="jill"></span>支持<span class="jill"></span>AspectJ<span class="jill"></span>的注解式切面编程。</span><span>只需要在<span class="jill"></span>java<span class="jill"></span>配置类中使用<span class="jill"></span>@EnableAspectJAutoProxy<span class="jill"></span>注解开启<span class="jill"></span>Spring<span class="jill"></span>对<span class="jill"></span>AspectJ<span class="jill"></span>代理的支持（类上）</span><span>（下面这些注解都可以使用<span class="jill"></span>xml<span class="jill"></span>配置实现）</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>举例代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
<span class="token variable">@EnableAspectJAutoProxy</span>
public class AppConfig {

}</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@Aspect</span></summary><div class="wolai-block wolai-text"><div><span>声明一个切面（类上）</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@PointCut</span></summary><div class="wolai-block wolai-text"><div><span>声明切入点（方法上）</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>五种</span><span>通知注解</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Before<span class="jill"></span>前置通知(Before&nbsp;advice)</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>前置通知，在连接点方法前调用</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>@AfterReturning<span class="jill"></span>返回通知(After&nbsp;(finally)&nbsp;advice)</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>返回通知，在连接点方法执行并正常返回后调用，要求连接点方法在执行过程中没有发生异常。</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>@AfterThrowing<span class="jill"></span>异常抛出通知(After&nbsp;throwing&nbsp;advice)</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>异常通知，当连接点方法异常时调用</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>@After<span class="jill"></span>后置通知(After&nbsp;returning&nbsp;advice)</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>后置通知，在连接点方法后调用。不管是抛出异常或者正常退出都会执行。</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>@Around<span class="jill"></span>环绕通知(Around&nbsp;advice)</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>环绕通知，它将覆盖原有方法，但是允许你通过反射调用原有方法</span></li></ul></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=5.使用 Spring 进行面向方面的编程"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;AOP（面向切面编程）</span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.jianshu.com/p/994027425b44"><span>Spring(4)——面向切面编程（AOP<span class="jill"></span>模块）</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>Spring</span><span>校验</span><span>（Validation&nbsp;）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>概念</span></summary><blockquote class="wolai-block"><span>JSR-303&nbsp;标准化了&nbsp;Java&nbsp;平台的验证约束声明和元数据。通过使用此&nbsp;API，您可以使用声明性验证约束来注解域模型属性，并且运行时会强制执行它们。您可以使用许多内置约束。您还可以定义自己的自定义约束。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>可以使用注解来进行数据校验</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>Jakarta&nbsp;&nbsp;Bean&nbsp;Validation&nbsp;注解</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>Jakarta&nbsp;Bean&nbsp;Validation&nbsp;constraints（Jakarta<span class="jill"></span>对象校验约束）</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>空校验</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Null</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须为&nbsp;null</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@NotNull</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须不为&nbsp;null</span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>字符串校验</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@NotBlank</span></summary><div class="wolai-block wolai-text"><div><span>字符串内容非空且长度大于<span class="jill"></span>0</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Length(min=下限,&nbsp;max=上限)</span></summary><div class="wolai-block wolai-text"><div><span>验证注解的元素值长度在<span class="jill"></span>min<span class="jill"></span>和<span class="jill"></span>max<span class="jill"></span>区间内</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Email(regexp=正则表达式)</span></summary><div class="wolai-block wolai-text"><div><span>验证注解的元素值是<span class="jill"></span>Email，也可以通过<span class="jill"></span>regexp<span class="jill"></span>和<span class="jill"></span>flag<span class="jill"></span>指定自定义的<span class="jill"></span>email<span class="jill"></span>格式</span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>布尔</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@AssertTrue</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须为&nbsp;true</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@AssertFalse</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须为&nbsp;false</span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>数字</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Min(value)</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须是一个数字，其值必须大于等于指定的最小值</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Max(value)</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须是一个数字，其值必须小于等于指定的最大值</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@DecimalMin(value)</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须是一个数字，其值必须大于等于指定的最小值</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@DecimalMax(value)</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须是一个数字，其值必须小于等于指定的最大值</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Negative</span></summary><div class="wolai-block wolai-text"><div><span>必须是负数</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@NegativeOrZero</span></summary><div class="wolai-block wolai-text"><div><span>必须是<span class="jill"></span>0<span class="jill"></span>或者负数</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Positive</span></summary><div class="wolai-block wolai-text"><div><span>必须是正数，不包括<span class="jill"></span>0</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@PositiveOrZero</span></summary><div class="wolai-block wolai-text"><div><span>必须是正数或<span class="jill"></span>0。</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Digits(integer=整数位数,&nbsp;fraction=小数位数)</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须是一个数字，其值必须在可接受的范围内。</span></div></div><div class="wolai-block wolai-text"><div><span>验证注解的元素值的整数位数和小数位数上限</span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>日期</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Past</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须是一个过去的日期</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@PastOrPresent</span></summary><div class="wolai-block wolai-text"><div><span>必须是过去或者现在的时间</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Futuret</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须是一个将来的日期</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@FutureOrPresent</span></summary><div class="wolai-block wolai-text"><div><span>必须是将来或者现在的时间</span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>其他（</span><span>字符串、数组、集合、map</span><span>）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Size(min=下限,&nbsp;max=上限)</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素的大小必须在指定的范围内。字符串长度必须在指定范围。例如字符串、Collection、Map、数组等</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@NotEmpty</span></summary><div class="wolai-block wolai-text"><div><span>CharSequence<span class="jill"></span>子类型、Collection、Map、数组元素值非空。</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Pattern(regexp=正则表达式)</span></summary><div class="wolai-block wolai-text"><div><span>被注释的元素必须符合指定的正则表达式</span></div></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>Hibernate&nbsp;Validator&nbsp;注解</span></summary><blockquote class="wolai-block"><span>除了<span class="jill"></span>Jakarta&nbsp;Bean&nbsp;Validation&nbsp;API<span class="jill"></span>定义的约束之外，Hibernate&nbsp;Validator<span class="jill"></span>还提供了几个有用的自定义约束，如下所示。除了一个例外，这些约束适用于字段/属性级别，只有<span class="jill"></span>@ScriptAssert<span class="jill"></span>是类级别的约束。</span></blockquote><div class="wolai-block wolai-text"><div><span>Hibernate&nbsp;也提供了一些约束，请参考</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#qECXw9w1gohpF369zDaEWy" class="wolai-bi-link"><span><span><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-hv-constraints"><span>Hibernate&nbsp;Validator&nbsp;7.0.1.Final</span></a></span></span></a></span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=JSR-303 和 JSR-349"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;JSR-303&nbsp;和&nbsp;JSR-349&nbsp;-&nbsp;bean<span class="jill"></span>校验</span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://beanvalidation.org/2.0/spec/#builtinconstraints"><span>Jakarta&nbsp;Bean&nbsp;Validation&nbsp;specification&nbsp;-&nbsp;官网</span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-hv-constraints"><span>Hibernate&nbsp;Validator&nbsp;7.0.1.Final</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>其他</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>Resources（资源）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>获取资源</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>获取资源方式图</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>获取类路径下资源</span></li><li><div class="marker"></div><span>获取文件资源</span></li><li><div class="marker"></div><span>获取<span class="jill"></span>http<span class="jill"></span>资源</span></li></ul><div class="wolai-block wolai-center"><figure><img src="media/image_9.png" style="width: 499px"/></figure></div></details><details class="wolai-block"><summary><div class="marker"></div><span>示例代码</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>所有应用程序上下文<span class="jill"></span>ApplicationContext&nbsp;（实现接口<span class="jill"></span>ResourcePatternResolver）都实现</span><span><code>ResourceLoader</code></span><span>接口。因此，所有应用程序上下文都可用于获取</span><span><code>Resource</code></span><span>个实例。</span></li></ul><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>        <span class="token operator">/</span><span class="token operator">/</span> 获取上下文对象
        ApplicationContext ctx <span class="token operator">=</span> new <span class="token function">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        <span class="token operator">/</span><span class="token operator">/</span> 获取classpath下的资源
        org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span>Resource resource <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"classpath:some/resource/path/myTemplate.txt"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span></pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=2.4. 资源加载器"><span>Spring&nbsp;Framework&nbsp;中文文档-&nbsp;2.4.&nbsp;资源加载器</span></a></span></div></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>Spring<span class="jill"></span>表达式语言（SpEL）</span></summary><blockquote class="wolai-block"><span>Spring&nbsp;表达式语言(简称“&nbsp;SpEL”)是一种功能强大的表达式语言，支持在运行时查询和操作对象图。语言语法类似于&nbsp;Unified&nbsp;EL，但提供了其他功能，最著名的是方法调用和基本的字符串模板功能。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>表达式语言给静态<span class="jill"></span>Java<span class="jill"></span>语言增加了动态功能。</span></li><li><div class="marker"></div><span>SpEL<span class="jill"></span>是单独模块，只依赖于<span class="jill"></span>core<span class="jill"></span>模块，不依赖于其他模块，可以单独使用。</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=4. Spring 表达式语言(SpEL)"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;Spring&nbsp;表达式语言(SpEL)</span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://zhuanlan.zhihu.com/p/174786047"><span>玩转<span class="jill"></span>Spring<span class="jill"></span>中强大的<span class="jill"></span>spel<span class="jill"></span>表达式！</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>Null-safety（空安全）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>概念</span></summary><blockquote class="wolai-block"><span>尽管&nbsp;Java&nbsp;不允许您使用其类型系统来表示空安全性，但&nbsp;Spring&nbsp;Framework&nbsp;现在在</span><span><code>org.springframework.lang</code></span><span>包中提供了以下&nbsp;注解，以使您可以声明&nbsp;API&nbsp;和字段的空性：</span></blockquote><blockquote class="wolai-block"><span>Spring&nbsp;Framework&nbsp;自身利用了这些&nbsp;注解，但是它们也可以在任何基于&nbsp;Spring&nbsp;的&nbsp;Java&nbsp;项目中使用，以声明&nbsp;null&nbsp;安全的&nbsp;API&nbsp;和可选的&nbsp;null&nbsp;安全的字段。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>就是<span class="jill"></span>Spring<span class="jill"></span>提供的空判断注解</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>注解</span></summary><ul class="wolai-block"><li><div class="marker"></div><span><a href="https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/lang/NonNull.html"><span>@NonNull</span></a></span><span>：表示特定参数，返回值或字段不能为</span><span><code>null</code></span><span>的&nbsp;注解(在使用</span><span><code>@NonNullApi</code></span><span>和</span><span><code>@NonNullFields</code></span><span>的参数和返回值上不需要)。<br/></span></li><li><div class="marker"></div><span><a href="https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/lang/Nullable.html"><span>@Nullable</span></a></span><span>：表示特定参数，返回值或字段可以是</span><span><code>null</code></span><span>的&nbsp;注解。<br/></span></li><li><div class="marker"></div><span><a href="https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/lang/NonNullApi.html"><span>@NonNullApi</span></a></span><span>：程序包级别的&nbsp;注解，它声明非&nbsp;null&nbsp;为参数和返回值的默认行为。<br/></span></li><li><div class="marker"></div><span><a href="https://docs.spring.io/spring-framework/docs/5.1.3.RELEASE/javadoc-api/org/springframework/lang/NonNullFields.html"><span>@NonNullFields</span></a></span><span>：程序包级别的&nbsp;注解，它声明非&nbsp;null&nbsp;为字段的默认行为。</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/core.html#:~:text=7. Null-safety"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;Null--safety（空安全）</span></a></span></div></div></details></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>数据存储（Data&nbsp;Access）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>事务（Spring<span class="jill"></span>支持的声明式事务）</span></li><li><div class="marker"></div><span>JDBC<span class="jill"></span>数据访问（Spring<span class="jill"></span>封装了<span class="jill"></span>JDBC，可以直接操作数据库，不需要引入其他框架也可以）</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>网站（Web&nbsp;Servlet）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>Spring&nbsp;Web&nbsp;MVC</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>概念</span></summary><blockquote class="wolai-block"><span>Spring&nbsp;Web&nbsp;MVC&nbsp;是基于&nbsp;Servlet&nbsp;API&nbsp;构建的原始&nbsp;Web&nbsp;框架，从一开始就已包含在&nbsp;Spring&nbsp;Framework&nbsp;中。正式名称“&nbsp;Spring&nbsp;Web&nbsp;MVC”来自其源模块的名称(</span><span><a href="https://github.com/spring-projects/spring-framework/tree/master/spring-webmvc"><span>spring-webmvc</span></a></span><span>)，但更通常称为“&nbsp;Spring&nbsp;MVC”。</span></blockquote><blockquote class="wolai-block"><span>与&nbsp;Spring&nbsp;Web&nbsp;MVCParallel，Spring&nbsp;Framework&nbsp;5.0&nbsp;引入了一个反应式堆栈&nbsp;Web&nbsp;框架，其名称“&nbsp;Spring&nbsp;WebFlux”也基于其源模块(</span><span><a href="https://github.com/spring-projects/spring-framework/tree/master/spring-webflux"><span>spring-webflux</span></a></span><span>)。本节介绍&nbsp;Spring&nbsp;Web&nbsp;MVC。&nbsp;</span><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/web-reactive.html#spring-web-reactive"><span>next&nbsp;section</span></a></span><span>涵盖了&nbsp;Spring&nbsp;WebFlux。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>基于<span class="jill"></span>Java<span class="jill"></span>实现的<span class="jill"></span>MVC<span class="jill"></span>轻量级<span class="jill"></span>web<span class="jill"></span>框架。</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>DispatcherServlet（调度器）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>执行流程</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>流程图</span></summary><div class="wolai-block wolai-center"><figure><img src="media/image_10.png" style="width: 528px"/></figure></div><div class="wolai-block wolai-center"><figure><img src="media/image_11.png" style="width: 528px"/></figure></div><div class="wolai-block wolai-center"><figure><img src="media/image_12.png" style="width: 528px"/></figure></div></details><details class="wolai-block"><summary><div class="marker"></div><span>基础流程</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>DispatcherServlet（调度器&nbsp;|&nbsp;中央处理器&nbsp;|&nbsp;前端控控制器）</span></summary><blockquote class="wolai-block"><span><code>DispatcherServlet</code></span><span>提供了用于请求处理的共享算法，而实际工作是由可配置的委托组件执行的。</span></blockquote><ul class="wolai-block"><li class="bg-default"><div class="marker"></div><span>DispatcherServlet<span class="jill"></span>收到请求调用<span class="jill"></span>HandlerMapping（处理器映射器）。</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>HandlerMapping（处理器映射器）</span></summary><blockquote class="wolai-block"><span>将请求与</span><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/web.html#mvc-handlermapping-interceptor"><span>interceptors</span></a></span><span>列表一起&nbsp;Map&nbsp;到处理程序，以进行预处理和后期处理。Map&nbsp;基于某些条件，具体取决于</span><span><code>HandlerMapping</code></span><span>实现。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>HandlerMapping<span class="jill"></span>根据配置或注解（两种实现）找到最终要执行的<span class="jill"></span>Handler<span class="jill"></span>处理器，返回处理器执行链<span class="jill"></span>HandlerExecutionChain（执行链中可能包含拦截器<span class="jill"></span>HandlerInterceptor）。</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>HandlerMapping<span class="jill"></span>的两个实现</span></summary><blockquote class="wolai-block"><span><code>HandlerMapping</code></span><span>的两个主要实现是</span><span><code>RequestMappingHandlerMapping</code></span><span>(支持</span><span><code>@RequestMapping</code></span><span>带注解的方法)和</span><span><code>SimpleUrlHandlerMapping</code></span><span>(将&nbsp;URI&nbsp;路径模式的显式注册维护到处理程序)。</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>注解：RequestMappingHandlerMapping：支持</span><span><code>@RequestMapping</code></span><span>带注解的方法</span></li><li><div class="marker"></div><span>xml<span class="jill"></span>配置：SimpleUrlHandlerMapping：将&nbsp;URI&nbsp;路径模式的显式注册维护到处理程序</span></li></ul></details></details><details class="wolai-block"><summary><div class="marker"></div><span>HandlerAdapter（处理器适配器）</span></summary><blockquote class="wolai-block"><span>帮助</span><span><code>DispatcherServlet</code></span><span>调用&nbsp;Map&nbsp;到请求的处理程序，无论实际如何调用该处理程序。例如，调用带注解的控制器需要解析注解。&nbsp;</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>请求<span class="jill"></span>HandlerAdapter<span class="jill"></span>执行刚刚返回的<span class="jill"></span>Handler。HandlerAdapter<span class="jill"></span>根据（Handler）规则执行<span class="jill"></span>Handler<span class="jill"></span>处理器（就是<span class="jill"></span>controller）。</span></li><li><div class="marker"></div><span>执行的<span class="jill"></span>Handler<span class="jill"></span>就是后端控制器（就是<span class="jill"></span>controller）Handler<span class="jill"></span>处理器执行完毕后，返回一个<span class="jill"></span>ModelAndView</span></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>ViewResolver（视图解析器）</span></summary><blockquote class="wolai-block"><span>解析从处理程序返回到实际</span><span><code>View</code></span><span>的基于逻辑</span><span><code>String</code></span><span>的视图名称，使用该视图名称呈现给响应</span></blockquote><ul class="wolai-block"><li><div class="marker"></div><span>DispatcherServlet<span class="jill"></span>将返回的<span class="jill"></span>ModelAndView<span class="jill"></span>进行请求<span class="jill"></span>ViewResolver<span class="jill"></span>视图解析器，视图解析解析成真正的视图<span class="jill"></span>view<span class="jill"></span>并返回（拼接前缀后缀）。</span></li><li><div class="marker"></div><span>最后数据填充到<span class="jill"></span>vie<span class="jill"></span>中，将渲染视图<span class="jill"></span>view，响应用户。</span></li></ul></details></details><details class="wolai-block"><summary><div class="marker"></div><span>源码解析</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>1.用户请求到</span><span>DispatcherServlet</span></summary><div class="wolai-block wolai-text"><div><span>&quot;/&quot;所有请求都会到调度器（调度器也是一个<span class="jill"></span>Servlet）。此时随便访问一个<span class="jill"></span>url<span class="jill"></span>会进入调度器。</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_13.png" style="width: 499px"/></figure></div><div class="wolai-block wolai-text"><div><span>访问调度器的时候，会进入<span class="jill"></span>doService()该方法，开始执行调度</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_14.png" style="width: 499px"/></figure></div></details><details class="wolai-block"><summary><div class="marker"></div><span>2.执行<span class="jill"></span>HandlerMapping</span></summary><div class="wolai-block wolai-text"><div><span>进入<span class="jill"></span>doDispatch()该方法会发现在<span class="jill"></span>getHandler()方法中获取了<span class="jill"></span>HandlerMapping<span class="jill"></span>并返回了处理器执行链<span class="jill"></span>HandlerExecutionChain。</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_15.png" style="width: 499px"/></figure></div><details class="wolai-block"><summary><div class="marker"></div><span>getHandler()方法</span></summary><div class="wolai-block wolai-center"><figure><img src="media/image_16.png" style="width: 499px"/></figure></div></details><details class="wolai-block"><summary><div class="marker"></div><span>扩展<span class="jill"></span>HandlerExecutionChain</span></summary><div class="wolai-block wolai-text"><div><span>在<span class="jill"></span>HandlerExecutionChain<span class="jill"></span>处理执行链中，不仅仅只是<span class="jill"></span>handler<span class="jill"></span>处理器，可能还会有处理器拦截器<span class="jill"></span>HandlerInterceptor。</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_17.png" style="width: 470px"/></figure></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>3.执行<span class="jill"></span>HandlerAdapter</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>用<span class="jill"></span>getHandlerAdapter()方法获取</span><span>HandlerAdapter</span><span>处理器适配器</span></li></ul><div class="wolai-block wolai-center"><figure><img src="media/image_18.png" style="width: 499px"/></figure></div><details class="wolai-block"><summary><div class="marker"></div><span>getHandlerAdapter()方法</span></summary><div class="wolai-block wolai-center"><figure><img src="media/image_19.png" style="width: 499px"/></figure></div></details><ul class="wolai-block"><li><div class="marker"></div><span>执行<span class="jill"></span>Handler<span class="jill"></span>处理（调用后端控制器<span class="jill"></span>Contrller）</span><div class="wolai-block wolai-center"><figure><img src="media/image_20.png" style="width: 470px"/></figure></div><details class="wolai-block"><summary><div class="marker"></div><span>handle()方法</span></summary><div class="wolai-block wolai-text"><div><span>进入<span class="jill"></span>handle()方法，会发现是一个接口，此时需要找到它对应是实现类。</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span>为什么是<span class="jill"></span>SimpleControllerHandlerAdapter？</span></summary><div class="wolai-block wolai-text"><div><span>因为我们使用的<span class="jill"></span>xxxContrller<span class="jill"></span>不是实现<span class="jill"></span>Controller<span class="jill"></span>接口，就是使用了<span class="jill"></span>@Controller<span class="jill"></span>注解。</span></div></div><div class="wolai-block wolai-text"><div><span>所以这里点进去方法后会发现它强制转换成了<span class="jill"></span>Controller<span class="jill"></span>类型。</span></div></div></details><div class="wolai-block wolai-center"><figure><img src="media/image_21.png" style="width: 470px"/></figure></div><div class="wolai-block wolai-text"><div><span>此时<span class="jill"></span>handleRequest()执行方法，将会执行到我们自己写的<span class="jill"></span>xxxController<span class="jill"></span>控制器（这个控制器实现了<span class="jill"></span>Controller<span class="jill"></span>接口）。</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_22.png" style="width: 470px"/></figure></div></details><details class="wolai-block"><summary><div class="marker"></div><span>扩展拦截器</span></summary><div class="wolai-block wolai-center"><figure><img src="media/image_23.png" style="width: 441px"/></figure></div></details></li></ul></details><details class="wolai-block"><summary><div class="marker"></div><span>4.执行<span class="jill"></span>ViewResolver</span></summary><div class="wolai-block wolai-text"><div><span>进入<span class="jill"></span>processDispatchResult()方法，mv（ModelAndView）作为参数传入了方法</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_24.png" style="width: 499px"/></figure></div><details class="wolai-block"><summary><div class="marker"></div><span>进入<span class="jill"></span>processDispatchResult()方法</span></summary><div class="wolai-block wolai-text"><div><span>可以看到<span class="jill"></span>mv<span class="jill"></span>当作参数传入了</span><span>render()方法</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_25.png" style="width: 499px"/></figure></div><details class="wolai-block"><summary><div class="marker"></div><span>进入<span class="jill"></span>render()方法</span></summary><div class="wolai-block wolai-text"><div><span>解析视图名称，并且返回<span class="jill"></span>view<span class="jill"></span>对象</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_26.png" style="width: 441px"/></figure></div><details class="wolai-block"><summary><div class="marker"></div><span>填充数据渲染视图</span></summary><div class="wolai-block wolai-text"><div><span>通过<span class="jill"></span>render()方法，填充数据，渲染视图</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_27.png" style="width: 412px"/></figure></div><details class="wolai-block"><summary><div class="marker"></div><span>进入<span class="jill"></span>reader()方法</span></summary><div class="wolai-block wolai-text"><div><span>进去会发现是一个接口，需要找打它的实现类<span class="jill"></span>AbstractView</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_28.png" style="width: 383px"/></figure></div><div class="wolai-block wolai-text"><div><span>渲染输出模型<span class="jill"></span>renderMergedOutputModel()方法</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_29.png" style="width: 383px"/></figure></div><details class="wolai-block"><summary><div class="marker"></div><span>进入<span class="jill"></span>renderMergedOutputModel()方法方法</span></summary><div class="wolai-block wolai-text"><div><span>这是一个抽象方法，再找他的实现子类的方法</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_30.png" style="width: 354px"/></figure></div><div class="wolai-block wolai-center"><figure><img src="media/image_31.png" style="width: 354px"/></figure></div><div class="wolai-block wolai-text"><div><span>最终获取到<span class="jill"></span>RequestDispatcher<span class="jill"></span>请求调度接口，然后选择<span class="jill"></span>forward()请求转发或<span class="jill"></span>include()方法，进行响应给用户</span></div></div><div class="wolai-block wolai-center"><figure><img src="media/image_32.png" style="width: 354px"/></figure></div><details class="wolai-block"><summary><div class="marker"></div><span>forward()和<span class="jill"></span>include()区别</span></summary><div class="wolai-block wolai-text"><div><span>用于在响应中包含其他资源(Servlet，JSP<span class="jill"></span>页面或<span class="jill"></span>HTML<span class="jill"></span>文件)的内容。      </span></div></div><div class="wolai-block wolai-text"><div><span>即请求转发后，原先的<span class="jill"></span>Servlet<span class="jill"></span>还可以继续输出响应信息，转发到的<span class="jill"></span>Servlet<span class="jill"></span>对请求做出的响应将并入原先<span class="jill"></span>Servlet<span class="jill"></span>的响应对象中。</span></div></div></details></details></details></details></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.bilibili.com/video/BV1Kz4y1D7yb?p=1"><span>springMVC<span class="jill"></span>执行流程详解_哔哩哔哩</span></a></span></div></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>拦截器</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>自定义拦截器（实现<span class="jill"></span>HandlerInterceptor）</span></summary><blockquote class="wolai-block"><span>所有</span><span><code>HandlerMapping</code></span><span>实现都支持处理程序拦截器，这些拦截器在您要将特定功能应用于某些请求时非常有用-例如检查主体。拦截器必须使用三种方法从</span><span><code>org.springframework.web.servlet</code></span><span>包中实现</span><span><code>HandlerInterceptor</code></span><span>，这三种方法应提供足够的灵&nbsp;Active&nbsp;以执行所有类型的预处理和后处理：<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;</span><span><code>preHandle(..)</code></span><span>：在执行实际处理程序之前<br/>&nbsp;&nbsp;&nbsp;&nbsp;</span><span><code>postHandle(..)</code></span><span>：执行处理程序后<br/>&nbsp;&nbsp;&nbsp;&nbsp;</span><span><code>afterCompletion(..)</code></span><span>：完成完整的请求后<br/><br/></span><span><code>preHandle(..)</code></span><span>方法返回布尔值。您可以使用此方法来中断或&nbsp;continue&nbsp;执行链的处理。当此方法返回</span><span><code>true</code></span><span>时，处理程序执行链&nbsp;continue。当它返回&nbsp;false&nbsp;时，</span><span><code>DispatcherServlet</code></span><span>假定拦截器本身已经处理了请求(例如，提供了适当的视图)，并且不会&nbsp;continue&nbsp;执行执行链中的其他拦截器和实际处理程序。</span></blockquote><blockquote class="wolai-block"><span>请注意，</span><span><code>postHandle</code></span><span>在</span><span><code>@ResponseBody</code></span><span>和</span><span><code>ResponseEntity</code></span><span>方法中用处不大，因为在</span><span><code>HandlerAdapter</code></span><span>内和</span><span><code>postHandle</code></span><span>之前将响应写入和提交。这意味着对响应进行任何更改为时已晚，例如添加额外的&nbsp;Headers。对于此类情况，您可以实现</span><span><code>ResponseBodyAdvice</code></span><span>并将其声明为</span><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/web.html#mvc-ann-controller-advice"><span>Controller&nbsp;Advice</span></a></span><span>&nbsp;bean&nbsp;或直接在</span><span><code>RequestMappingHandlerAdapter</code></span><span>上对其进行配置。</span></blockquote><div class="wolai-block wolai-text"><div><span>可以通过实现</span><span><code>HandlerInterceptor</code></span><span>创建拦截器</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>拦截器配置注册类（实现<span class="jill"></span>WebMvcConfigurer&nbsp;）</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>您可以注册拦截器以应用于传入的请求</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>官方代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
<span class="token variable">@EnableWebMvc</span>
public class WebConfig implements WebMvcConfigurer {

    <span class="token variable">@Override</span>
    public void <span class="token function">addInterceptors</span><span class="token punctuation">(</span>InterceptorRegistry registry<span class="token punctuation">)</span> {
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>new <span class="token function">LocaleChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>new <span class="token function">ThemeChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/admin/**"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>new <span class="token function">SecurityInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/secure/*"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>示例代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
public class ResourcesConfig implements WebMvcConfigurer
{
    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 首页地址
     <span class="token operator">*</span><span class="token operator">/</span>
    @<span class="token function">Value</span><span class="token punctuation">(</span><span class="token string">"${shiro.user.indexUrl}"</span><span class="token punctuation">)</span>
    private String indexUrl<span class="token comment" spellcheck="true">;</span>

    <span class="token variable">@Autowired</span>
    private RepeatSubmitInterceptor repeatSubmitInterceptor<span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 默认首页的设置，当输入域名是可以自动跳转到默认指定的网页
     <span class="token operator">*</span><span class="token operator">/</span>
    <span class="token variable">@Override</span>
    public void <span class="token function">addViewControllers</span><span class="token punctuation">(</span>ViewControllerRegistry registry<span class="token punctuation">)</span>
    {
        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"forward:"</span> <span class="token operator">+</span> indexUrl<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token variable">@Override</span>
    public void <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span>ResourceHandlerRegistry registry<span class="token punctuation">)</span>
    {
        <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 本地文件上传路径 <span class="token operator">*</span><span class="token operator">/</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span>Constants<span class="token punctuation">.</span>RESOURCE_PREFIX <span class="token operator">+</span> <span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"file:"</span> <span class="token operator">+</span> RuoYiConfig<span class="token punctuation">.</span><span class="token function">getProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

        <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> swagger配置 <span class="token operator">*</span><span class="token operator">/</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">"/swagger-ui/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"classpath:/META-INF/resources/webjars/springfox-swagger-ui/"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 自定义拦截规则
     <span class="token operator">*</span><span class="token operator">/</span>
    <span class="token variable">@Override</span>
    public void <span class="token function">addInterceptors</span><span class="token punctuation">(</span>InterceptorRegistry registry<span class="token punctuation">)</span>
    {
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>repeatSubmitInterceptor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
}</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/web.html#:~:text=1.1.6. Interception"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;1.1.6.&nbsp;Interception</span></a></span></div></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>常用注解</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@Controller</span></summary><div class="wolai-block wolai-text"><div><span>表明该类是控制器</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@Rest</span><span>Controller</span></summary><div class="wolai-block wolai-text"><div><span>这是一个组合注解，底层源码使用了<span class="jill"></span>@Controller+@ResponseBody。</span></div></div><div class="wolai-block wolai-text"><div><span>表明该类是控制器,，并且所有方法以<span class="jill"></span>json<span class="jill"></span>格式响应数据</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@ResponseBody&nbsp;</span></summary><div class="wolai-block wolai-text"><div><span>json<span class="jill"></span>格式响应数据</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>请求映射（路径映射）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@RequestMapping</span></summary><ul class="wolai-block"><li><div class="marker"></div><span>下面几个都可以用这个注解进行请求路径映射。因为下面几个注解底层源码都使用了该注解。备注：URI&nbsp;变量将自动转换为适当的类型</span></li></ul><details class="wolai-block"><summary><div class="marker"></div><span>正则示例代码</span></summary><div class="wolai-block wolai-text"><div><span>语法</span><span><code>{varName:regex}</code></span><span>声明带有正则表达式的&nbsp;URI&nbsp;变量，语法为</span><span><code>{varName:regex}</code></span><span>。例如，给定&nbsp;URL&nbsp;</span><span><code>&quot;/spring-web-3.0.5&nbsp;.jar&quot;</code></span><span>，以下方法将提取名称，版本和文件&nbsp;extensions：</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">/</span><span class="token operator">/</span> 正则示例
@<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{name:[a-z-]+}-{version:\\d\\.\\d\\.\\d}{ext:\\.[a-z]+}"</span><span class="token punctuation">)</span>
public void <span class="token function">handle</span><span class="token punctuation">(</span><span class="token variable">@PathVariable</span> String version<span class="token punctuation">,</span> <span class="token variable">@PathVariable</span> String ext<span class="token punctuation">)</span> {
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}
<span class="token operator">/</span><span class="token operator">/</span> id只能是数字
@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test9/{id:\d+}"</span><span class="token punctuation">)</span>
<span class="token operator">/</span><span class="token operator">/</span> id只能是<span class="token number">5</span>个数字，<span class="token number">1</span>个<span class="token number">2</span>个的都不行
@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test9/{id:\d{5}}"</span><span class="token punctuation">)</span>
<span class="token operator">/</span><span class="token operator">/</span> 如：<span class="token number">123</span><span class="token operator">-</span>ab
@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test10/{msg:^\\d{3}-[a-z]{2}$}"</span><span class="token punctuation">)</span> 
</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>通配符使用</span></summary><ul class="wolai-block"><li><div class="marker"></div><span><code>?</code></span><span>匹配一个字符</span></li><li><div class="marker"></div><span><code>*</code></span><span>匹配路径段中的零个或多个字符</span></li><li><div class="marker"></div><span><code>**</code></span><span>匹配零个或多个路径段</span></li></ul><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/group/?"</span><span class="token punctuation">)</span>
@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/group/?/id"</span><span class="token punctuation">)</span>
@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test/*"</span><span class="token punctuation">)</span>
@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test/*/name"</span><span class="token punctuation">)</span>
@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test/person.*"</span><span class="token punctuation">)</span>
<span class="token operator">/</span><span class="token operator">/</span> 只要是<span class="token operator">/</span>test<span class="token operator">/</span>开头的都能匹配到
@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test/**"</span><span class="token punctuation">)</span> </pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@GetMapping</span></summary><div class="wolai-block wolai-text"><div><span>Get<span class="jill"></span>请求</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@PostMapping</span></summary><div class="wolai-block wolai-text"><div><span>Post<span class="jill"></span>请求</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@PutMapping</span></summary><div class="wolai-block wolai-text"><div><span>Put<span class="jill"></span>请求</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@DeleteMapping</span></summary><div class="wolai-block wolai-text"><div><span>Delete<span class="jill"></span>请求</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@PatchMapping</span></summary><div class="wolai-block wolai-text"><div><span>Patch<span class="jill"></span>请求</span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>请求参数绑定</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@PathVariable</span></summary><div class="wolai-block wolai-text"><div><span>路径变量，参数匹配占位符，用于动态参数，RestFul<span class="jill"></span>接口</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span>实例代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>@<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/owners/{ownerId}/pets/{petId}"</span><span class="token punctuation">)</span>
public Pet <span class="token function">findPet</span><span class="token punctuation">(</span><span class="token variable">@PathVariable</span> Long ownerId<span class="token punctuation">,</span> <span class="token variable">@PathVariable</span> Long petId<span class="token punctuation">)</span> {
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}
@<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>
public Person <span class="token function">getPerson</span><span class="token punctuation">(</span><span class="token variable">@PathVariable</span> Long id<span class="token punctuation">)</span> {
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}
</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@RequestParam</span></summary><div class="wolai-block wolai-text"><div><span>请求参数，用于设置参数值的<span class="jill"></span>name<span class="jill"></span>别名、required<span class="jill"></span>参数是否必须、defalutValue<span class="jill"></span>默认值。</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@RequestBody</span></summary><div class="wolai-block wolai-text"><div><span>请求体，用于访问&nbsp;HTTP&nbsp;请求正文。如果前端传值对象到后端，则可使用该注解。</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>
public void <span class="token function">login</span><span class="token punctuation">(</span><span class="token variable">@requestBody</span> User u<span class="token punctuation">)</span>{
}
@<span class="token function">PostMapping</span><span class="token punctuation">(</span><span class="token string">"/accounts"</span><span class="token punctuation">)</span>
public void <span class="token function">handle</span><span class="token punctuation">(</span><span class="token variable">@RequestBody</span> Account account<span class="token punctuation">)</span> {
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}
</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@RequestPart</span></summary><div class="wolai-block wolai-text"><div><span>该注解用在<span class="jill"></span>multipart/form-data<span class="jill"></span>表单提交请求的方法上。@RequestParam<span class="jill"></span>适用于<span class="jill"></span>name-value&nbsp;String<span class="jill"></span>类型的请求域，@RequestPart<span class="jill"></span>适用于复杂的请求域（像<span class="jill"></span>JSON，XML）。</span></div></div><div class="wolai-block wolai-text"><div><span>上传文件的时候会用到。</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">/</span><span class="token operator">/</span> 官方案例
@<span class="token function">PostMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
public String <span class="token function">handle</span><span class="token punctuation">(</span>@<span class="token function">RequestPart</span><span class="token punctuation">(</span><span class="token string">"meta-data"</span><span class="token punctuation">)</span> MetaData metadata<span class="token punctuation">,</span>
        @<span class="token function">RequestPart</span><span class="token punctuation">(</span><span class="token string">"file-data"</span><span class="token punctuation">)</span> MultipartFile file<span class="token punctuation">)</span> {
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}
@<span class="token function">PostMapping</span><span class="token punctuation">(</span><span class="token string">"upload"</span><span class="token punctuation">)</span>
public ImageInfo <span class="token function">upload</span><span class="token punctuation">(</span>@<span class="token function">RequestPart</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span> MultipartFile file<span class="token punctuation">,</span>@<span class="token function">RequestPart</span><span class="token punctuation">(</span><span class="token string">"imageInfo"</span><span class="token punctuation">)</span> ImageInfo imageInfo<span class="token punctuation">)</span> {
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>imageInfo<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    return imageInfo<span class="token comment" spellcheck="true">;</span>
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@MatrixVariable</span></summary><div class="wolai-block wolai-text"><div><span>矩阵变量，使用之前需要先配置开启，因为默认是没有打开的</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
public class WebConfig extends WebMvcConfigurerAdapter {
 
    <span class="token variable">@Override</span>
    public void <span class="token function">configurePathMatch</span><span class="token punctuation">(</span>PathMatchConfigurer configurer<span class="token punctuation">)</span> {
        UrlPathHelper urlPathHelper<span class="token operator">=</span>new <span class="token function">UrlPathHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        urlPathHelper<span class="token punctuation">.</span><span class="token function">setRemoveSemicolonContent</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">setUrlPathHelper</span><span class="token punctuation">(</span>urlPathHelper<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
}</pre></div><details class="wolai-block"><summary><div class="marker"></div><span>举例代码</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">/</span><span class="token operator">/</span> GET <span class="token operator">/</span>pets<span class="token operator">/</span><span class="token number">42</span><span class="token comment" spellcheck="true">;q=11;r=22</span>
@<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/pets/{petId}"</span><span class="token punctuation">)</span>
public void <span class="token function">findPet</span><span class="token punctuation">(</span><span class="token variable">@PathVariable</span> String petId<span class="token punctuation">,</span> <span class="token variable">@MatrixVariable</span> int q<span class="token punctuation">)</span> {
    <span class="token operator">/</span><span class="token operator">/</span> petId <span class="token operator">==</span> <span class="token number">42</span>
    <span class="token operator">/</span><span class="token operator">/</span> q <span class="token operator">==</span> <span class="token number">11</span>
}</pre></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">/</span><span class="token operator">/</span> GET <span class="token operator">/</span>owners<span class="token operator">/</span><span class="token number">42</span><span class="token comment" spellcheck="true">;q=11/pets/21;q=22</span>
@<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/owners/{ownerId}/pets/{petId}"</span><span class="token punctuation">)</span>
public void <span class="token function">findPet</span><span class="token punctuation">(</span>
        @<span class="token function">MatrixVariable</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"q"</span><span class="token punctuation">,</span> pathVar<span class="token operator">=</span><span class="token string">"ownerId"</span><span class="token punctuation">)</span> int q1<span class="token punctuation">,</span>
        @<span class="token function">MatrixVariable</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"q"</span><span class="token punctuation">,</span> pathVar<span class="token operator">=</span><span class="token string">"petId"</span><span class="token punctuation">)</span> int q2<span class="token punctuation">)</span> {
    <span class="token operator">/</span><span class="token operator">/</span> q1 <span class="token operator">==</span> <span class="token number">11</span>
    <span class="token operator">/</span><span class="token operator">/</span> q2 <span class="token operator">==</span> <span class="token number">22</span>
}</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@ModelAttribute</span></summary><div class="wolai-block wolai-text"><div><span>绑定请求参数到实体对象。该注解类型将请求参数绑定到<span class="jill"></span>Model<span class="jill"></span>对象。</span></div></div><div class="wolai-block wolai-text"><div><span>和<span class="jill"></span>@RequestBody<span class="jill"></span>类似。区别在于：@ModelAttribute<span class="jill"></span>注解的实体类接收前端发来的数据格式需要为&quot;x-www-form-urlencoded&quot;，@RequestBody<span class="jill"></span>注解的实体类接收前端的数据格式为<span class="jill"></span>JSON(application/json)格式。（若是使用<span class="jill"></span>@ModelAttribute<span class="jill"></span>接收<span class="jill"></span>application/json<span class="jill"></span>格式，虽然不会报错，但是值并不会自动填入）</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>@<span class="token function">PutMapping</span><span class="token punctuation">(</span><span class="token string">"/accounts/{account}"</span><span class="token punctuation">)</span>
public String <span class="token function">save</span><span class="token punctuation">(</span>@<span class="token function">ModelAttribute</span><span class="token punctuation">(</span><span class="token string">"account"</span><span class="token punctuation">)</span> Account account<span class="token punctuation">)</span> {
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>请求头绑定</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@RequestHeader</span></summary><div class="wolai-block wolai-text"><div><span>请求头，用于将请求的头的信息区域数据映射到功能处理方法的参数上。和<span class="jill"></span>@RequestParam<span class="jill"></span>类似，可以设置<span class="jill"></span>name<span class="jill"></span>别名、required<span class="jill"></span>参数是否必须、defalutValue<span class="jill"></span>默认值。</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>@<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/demo"</span><span class="token punctuation">)</span>
public void <span class="token function">handle</span><span class="token punctuation">(</span>
    @<span class="token function">RequestHeader</span><span class="token punctuation">(</span><span class="token string">"Accept-Encoding"</span><span class="token punctuation">)</span> String encoding<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    @<span class="token function">RequestHeader</span><span class="token punctuation">(</span><span class="token string">"Keep-Alive"</span><span class="token punctuation">)</span> long keepAlive<span class="token punctuation">)</span> { <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@CookieValue</span></summary><div class="wolai-block wolai-text"><div><span>用于访问&nbsp;cookie。&nbsp;Cookies&nbsp;值将转换为声明的方法参数类型。</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>@<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/demo"</span><span class="token punctuation">)</span>
public void <span class="token function">handle</span><span class="token punctuation">(</span>@<span class="token function">CookieValue</span><span class="token punctuation">(</span><span class="token string">"JSESSIONID"</span><span class="token punctuation">)</span> String cookie<span class="token punctuation">)</span> { <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
}</pre></div></details></details><details class="bg-default wolai-block"><summary><div class="marker"></div><span>其他不常用</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@SessionAttribute</span></summary><div class="wolai-block wolai-text"><div><span>如果您需要访问全局存在(例如，在控制器外部(例如，通过过滤器)Management)并且可能存在或可能不存在的预先存在的会话属性，则可以在方法参数上使用</span><span><code>@SessionAttribute</code></span><span>Comments，作为以下示例显示：</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
public String <span class="token function">handle</span><span class="token punctuation">(</span><span class="token variable">@SessionAttribute</span> User user<span class="token punctuation">)</span> { <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@SessionAttributes</span></summary><div class="wolai-block wolai-text"><div><span>用于在请求之间的&nbsp;HTTP&nbsp;Servlet&nbsp;会话中存储模型属性。它是类型级别的注解，用于声明特定控制器使用的会话属性。</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Controller</span>
@<span class="token function">SessionAttributes</span><span class="token punctuation">(</span><span class="token string">"pet"</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
public class EditPetForm {
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}</pre></div><details class="wolai-block"><summary><div class="marker"></div><span>使用存储的值</span></summary><div class="wolai-block wolai-text"><div><span>在第一个请求上，将名称为</span><span><code>pet</code></span><span>的模型属性添加到模型时，该属性会自动提升为&nbsp;HTTP&nbsp;Servlet&nbsp;会话并保存在该会话中。它会一直保留在那里，直到另一个控制器方法使用</span><span><code>SessionStatus</code></span><span>方法参数来清除存储，如以下示例所示：</span></div></div><ul class="wolai-block"><li><div class="marker"></div><span><strong>(1)</strong></span><span>&nbsp;将</span><span><code>Pet</code></span><span>值存储在&nbsp;Servlet&nbsp;会话中。<br/></span></li><li><div class="marker"></div><span><strong>(2)</strong></span><span>&nbsp;从&nbsp;Servlet&nbsp;会话中清除</span><span><code>Pet</code></span><span>值。</span></li></ul><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Controller</span>
@<span class="token function">SessionAttributes</span><span class="token punctuation">(</span><span class="token string">"pet"</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
public class EditPetForm {
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    @<span class="token function">PostMapping</span><span class="token punctuation">(</span><span class="token string">"/pets/{id}"</span><span class="token punctuation">)</span>
    public String <span class="token function">handle</span><span class="token punctuation">(</span>Pet pet<span class="token punctuation">,</span> BindingResult errors<span class="token punctuation">,</span> SessionStatus status<span class="token punctuation">)</span> {
        <span class="token keyword">if</span> <span class="token punctuation">(</span>errors<span class="token punctuation">.</span>hasErrors<span class="token punctuation">)</span> {
            <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        }
            status<span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">; (2)</span>
            <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        }
    }
}</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@RequestAttribute</span></summary><div class="wolai-block wolai-text"><div><span>与</span><span><code>@SessionAttribute</code></span><span>相似，您可以使用</span><span><code>@RequestAttribute</code></span><span>注解来访问先前创建的预先存在的请求属性</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>@<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
public String <span class="token function">handle</span><span class="token punctuation">(</span><span class="token variable">@RequestAttribute</span> Client client<span class="token punctuation">)</span> { <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>异常处理注解</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>全局</span><span>异常</span><span>/数据绑定</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@ControllerAdvice&nbsp;</span></summary><div class="wolai-block wolai-text"><div><span>这是一个增强的&nbsp;Controller。可以实现三个方面的功能：</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span>1.全局异常处理</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Controller</span>
public class SimpleController {
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token variable">@ExceptionHandler</span>
    public ResponseEntity<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token function">handle</span><span class="token punctuation">(</span>IOException ex<span class="token punctuation">)</span> {
        <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    }
}
<span class="token variable">@ControllerAdvice</span>
public class MyGlobalExceptionHandler {
    @<span class="token function">ExceptionHandler</span><span class="token punctuation">(</span>Exception<span class="token punctuation">.</span>class<span class="token punctuation">)</span>
    public ModelAndView <span class="token function">customException</span><span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> {
        ModelAndView mv <span class="token operator">=</span> new <span class="token function">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"myerror"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        return mv<span class="token comment" spellcheck="true">;</span>
    }
}
</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>2.全局数据绑定</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@ControllerAdvice</span>
public class MyGlobalExceptionHandler {
    @<span class="token function">ModelAttribute</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"md"</span><span class="token punctuation">)</span>
    public Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">mydata</span><span class="token punctuation">(</span><span class="token punctuation">)</span> {
        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> new HashMap<span class="token operator">&lt;></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">,</span> <span class="token string">"男"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        return map<span class="token comment" spellcheck="true">;</span>
    }
}</pre></div></details><details class="wolai-block"><summary><div class="marker placeholder"></div><span>3.全局数据预处理</span></summary></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.cnblogs.com/lenve/p/10748453.html"><span>SpringMVC&nbsp;中&nbsp;@ControllerAdvice&nbsp;注解的三种使用场景！</span></a></span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@InitBinder</span></summary><blockquote class="wolai-block"><span><code>@InitBinder</code></span><span>个方法可以注册特定于控制器的</span><span><code>java.bean.PropertyEditor</code></span><span>或&nbsp;Spring&nbsp;</span><span><code>Converter</code></span><span>和</span><span><code>Formatter</code></span><span>组件。</span></blockquote></details></details><details class="wolai-block"><summary><div class="marker"></div><span>@ExceptionHandler</span></summary><div class="wolai-block wolai-text"><div><span>用于处理控制器方法中的异常</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Controller</span>
public class SimpleController {
    <span class="token variable">@ExceptionHandler</span>
    public ResponseEntity<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token function">handle</span><span class="token punctuation">(</span>IOException ex<span class="token punctuation">)</span> {
        <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    }
    @<span class="token function">ExceptionHandler</span><span class="token punctuation">(</span>{FileSystemException<span class="token punctuation">.</span>class<span class="token punctuation">,</span> RemoteException<span class="token punctuation">.</span>class}<span class="token punctuation">)</span>
    public ResponseEntity<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token function">handle</span><span class="token punctuation">(</span>IOException ex<span class="token punctuation">)</span> {
        <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    }
}</pre></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>跨域（三种方式）</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>@CrossOrigin（单个方法）</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@RestController</span>
@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/account"</span><span class="token punctuation">)</span>
public class AccountController {
    <span class="token variable">@CrossOrigin</span>
    @<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>
    public Account <span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token variable">@PathVariable</span> Long id<span class="token punctuation">)</span> {
        <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    }
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>@CrossOrigin（整个控制器）</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>@<span class="token function">CrossOrigin</span><span class="token punctuation">(</span>origins <span class="token operator">=</span> <span class="token string">"http://domain2.com"</span><span class="token punctuation">,</span> maxAge <span class="token operator">=</span> <span class="token number">3600</span><span class="token punctuation">)</span>
<span class="token variable">@RestController</span>
@<span class="token function">RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/account"</span><span class="token punctuation">)</span>
public class AccountController {
    @<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>
    public Account <span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token variable">@PathVariable</span> Long id<span class="token punctuation">)</span> {
        <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    }
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>全局跨域</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
<span class="token variable">@EnableWebMvc</span>
public class WebConfig implements WebMvcConfigurer {

    <span class="token variable">@Override</span>
    public void <span class="token function">addCorsMappings</span><span class="token punctuation">(</span>CorsRegistry registry<span class="token punctuation">)</span> {

        registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/api/**"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">allowedOrigins</span><span class="token punctuation">(</span><span class="token string">"http://domain2.com"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">"PUT"</span><span class="token punctuation">,</span> <span class="token string">"DELETE"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">allowedHeaders</span><span class="token punctuation">(</span><span class="token string">"header1"</span><span class="token punctuation">,</span> <span class="token string">"header2"</span><span class="token punctuation">,</span> <span class="token string">"header3"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">exposedHeaders</span><span class="token punctuation">(</span><span class="token string">"header1"</span><span class="token punctuation">,</span> <span class="token string">"header2"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">allowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

        <span class="token operator">/</span><span class="token operator">/</span> Add more mappings<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    }
}</pre></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
 <span class="token operator">*</span> web跨域访问配置
 <span class="token operator">*</span><span class="token operator">/</span>
<span class="token variable">@Override</span>
public void <span class="token function">addCorsMappings</span><span class="token punctuation">(</span>CorsRegistry registry<span class="token punctuation">)</span>
{
  <span class="token operator">/</span><span class="token operator">/</span> 设置允许跨域的路径
  registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span>
      <span class="token operator">/</span><span class="token operator">/</span> 设置允许跨域请求的域名
      <span class="token punctuation">.</span><span class="token function">allowedOrigins</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span>
      <span class="token operator">/</span><span class="token operator">/</span> 是否允许证书
      <span class="token punctuation">.</span><span class="token function">allowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token operator">/</span><span class="token operator">/</span> 设置允许的方法
      <span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token string">"DELETE"</span><span class="token punctuation">,</span> <span class="token string">"PUT"</span><span class="token punctuation">)</span>
      <span class="token operator">/</span><span class="token operator">/</span> 设置允许的header属性
      <span class="token punctuation">.</span><span class="token function">allowedHeaders</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span>
      <span class="token operator">/</span><span class="token operator">/</span> 跨域允许时间
      <span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>视图层技术</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>Thymeleaf</span></summary><div class="wolai-block wolai-text"><div><span>SpringBoot<span class="jill"></span>默认支持的模板引擎<span class="jill"></span>Thymeleaf</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>FreeMarker</span></summary><div class="wolai-block wolai-text"><div><span><a href="http://www.freemarker.org/"><span>Apache&nbsp;FreeMarker</span></a></span><span>是一个模板引擎，用于生成从&nbsp;HTML&nbsp;到电子邮件等的任何类型的文本输出。</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>Groovy&nbsp;Markup</span></summary><div class="wolai-block wolai-text"><div><span><a href="http://groovy-lang.org/templating.html#_the_markuptemplateengine"><span>Groovy&nbsp;标记模板引擎</span></a></span><span>主要用于生成类似&nbsp;XML&nbsp;的标记(XML，XHTML，HTML5&nbsp;等)，但是您可以使用它来生成任何基于文本的内容。&nbsp;Spring&nbsp;框架具有内置的集成，可以将&nbsp;Spring&nbsp;MVC&nbsp;与&nbsp;Groovy&nbsp;标记一起使用。</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>JSP&nbsp;和&nbsp;JSTL</span></summary><div class="wolai-block wolai-text"><div><span>Spring&nbsp;框架具有内置的集成，可以将&nbsp;Spring&nbsp;MVC&nbsp;与&nbsp;JSP&nbsp;和&nbsp;JSTL&nbsp;一起使用。</span></div></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>MVC<span class="jill"></span>配置类</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>启用&nbsp;MVC&nbsp;配置</span></summary><div class="wolai-block wolai-text"><div><span>在&nbsp;Java&nbsp;配置中，可以使用</span><span><code>@EnableWebMvc</code></span><span>注解来启用&nbsp;MVC&nbsp;配置</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
<span class="token variable">@EnableWebMvc</span>
public class WebConfig {
}EnableWebMvc</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>MVC<span class="jill"></span>配置接口（MVC&nbsp;Config&nbsp;API）</span></summary><div class="wolai-block wolai-text"><div><span>在&nbsp;Java&nbsp;配置中，您可以实现</span><span><code>WebMvcConfigurer</code></span><span>接口。跨域实现接口</span><span>里面</span><span>有相关的配置信息。</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
<span class="token variable">@EnableWebMvc</span>
public class WebConfig implements WebMvcConfigurer {

    <span class="token operator">/</span><span class="token operator">/</span> Implement configuration methods<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>类型转换（Type&nbsp;Conversion）</span></summary><div class="wolai-block wolai-text"><div><span>默认情况下，安装了</span><span><code>Number</code></span><span>和</span><span><code>Date</code></span><span>类型的格式化程序，包括对</span><span><code>@NumberFormat</code></span><span>和</span><span><code>@DateTimeFormat</code></span><span>注解的支持。</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
<span class="token variable">@EnableWebMvc</span>
public class WebConfig implements WebMvcConfigurer {
    <span class="token operator">/</span><span class="token operator">/</span> 在 Java 配置中，您可以注册自定义格式器和转换器
    <span class="token variable">@Override</span>
    public void <span class="token function">addFormatters</span><span class="token punctuation">(</span>FormatterRegistry registry<span class="token punctuation">)</span> {
        <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    }
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>校验（Validation）</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
<span class="token variable">@EnableWebMvc</span>
public class WebConfig implements WebMvcConfigurer {
    <span class="token operator">/</span><span class="token operator">/</span> 在 Java 配置中，您可以自定义全局Validator实例
    <span class="token variable">@Override</span>
    public Validator <span class="token function">getValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">; {</span>
        <span class="token operator">/</span><span class="token operator">/</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    }
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>拦截器（Interceptors）</span></summary><div class="wolai-block wolai-text"><div><span>可以参考</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#pw6pNzWDkrTwN5km28rjtV" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>拦截器</span></span></a></span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
<span class="token variable">@EnableWebMvc</span>
public class WebConfig implements WebMvcConfigurer {

    <span class="token variable">@Override</span>
    public void <span class="token function">addInterceptors</span><span class="token punctuation">(</span>InterceptorRegistry registry<span class="token punctuation">)</span> {
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>new <span class="token function">LocaleChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>new <span class="token function">ThemeChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/admin/**"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>new <span class="token function">SecurityInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/secure/*"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>内容类型（Content&nbsp;Type）</span></summary><div class="wolai-block wolai-text"><div><span>您可以配置&nbsp;Spring&nbsp;MVC&nbsp;如何根据请求确定请求的媒体类型(例如</span><span><code>Accept</code></span><span>Headers，URL&nbsp;路径扩展，查询参数等)。</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
<span class="token variable">@EnableWebMvc</span>
public class WebConfig implements WebMvcConfigurer {

    <span class="token variable">@Override</span>
    public void <span class="token function">configureContentNegotiation</span><span class="token punctuation">(</span>ContentNegotiationConfigurer configurer<span class="token punctuation">)</span> {
        configurer<span class="token punctuation">.</span><span class="token function">mediaType</span><span class="token punctuation">(</span><span class="token string">"json"</span><span class="token punctuation">,</span> MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        configurer<span class="token punctuation">.</span><span class="token function">mediaType</span><span class="token punctuation">(</span><span class="token string">"xml"</span><span class="token punctuation">,</span> MediaType<span class="token punctuation">.</span>APPLICATION_XML<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>视图控制器（View&nbsp;ControllersconfigureViewResolvers）</span></summary><div class="wolai-block wolai-text"><div><span>这是定义被调用时立即转发到视图的</span><span><code>ParameterizableViewController</code></span><span>的快捷方式。在视图生成响应之前没有&nbsp;Java&nbsp;控制器逻辑要执行的静态情况下，可以使用它。</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>
<span class="token variable">@Configuration</span>
<span class="token variable">@EnableWebMvc</span>
public class WebConfig implements WebMvcConfigurer {
    <span class="token operator">/</span><span class="token operator">/</span> 以下 Java 配置示例将对<span class="token operator">/</span>的请求转发到名为home的视图：
    <span class="token variable">@Override</span>
    public void <span class="token function">addViewControllers</span><span class="token punctuation">(</span>ViewControllerRegistry registry<span class="token punctuation">)</span> {
        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"home"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
}
</pre></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 默认首页的设置，当输入域名是可以自动跳转到默认指定的网页
     <span class="token operator">*</span><span class="token operator">/</span>
    <span class="token variable">@Override</span>
    public void <span class="token function">addViewControllers</span><span class="token punctuation">(</span>ViewControllerRegistry registry<span class="token punctuation">)</span>
    {
        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"forward:"</span> <span class="token operator">+</span> indexUrl<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>静态资源（Static&nbsp;Resources）</span></summary><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token variable">@Configuration</span>
<span class="token variable">@EnableWebMvc</span>
public class WebConfig implements WebMvcConfigurer {

    <span class="token variable">@Override</span>
    public void <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span>ResourceHandlerRegistry registry<span class="token punctuation">)</span> {
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">"/resources/**"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"/public"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/static/"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setCachePeriod</span><span class="token punctuation">(</span><span class="token number">31556926</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
}</pre></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>    <span class="token variable">@Override</span>
    public void <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span>ResourceHandlerRegistry registry<span class="token punctuation">)</span>
    {
        <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> 本地文件上传路径 <span class="token operator">*</span><span class="token operator">/</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span>Constants<span class="token punctuation">.</span>RESOURCE_PREFIX <span class="token operator">+</span> <span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"file:"</span> <span class="token operator">+</span> RuoYiConfig<span class="token punctuation">.</span><span class="token function">getProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

        <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span> swagger配置 <span class="token operator">*</span><span class="token operator">/</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">"/swagger-ui/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"classpath:/META-INF/resources/webjars/springfox-swagger-ui/"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>RESTFul</span></summary><div class="wolai-block wolai-text"><div><span>RESTFUL<span class="jill"></span>是一种网络应用程序的设计风格和开发方式，经常使用注解的参考：</span><span><a href="https://www.wolai.com/2uDacXM1CfRYYqXbYc3eYQ#7xtLkudS51dRwZ3wWufakQ" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>@PathVariable</span></span></a></span></div></div><details class="wolai-block"><summary><div class="marker"></div><span>返回对象</span></summary><div class="wolai-block wolai-text"><div><span>封装了一个返回结果对象，数据统一放到<span class="jill"></span>data<span class="jill"></span>中，同时还有一个工具类</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
 <span class="token operator">*</span> API操作结果返回类
 <span class="token operator">*</span>
 <span class="token operator">*</span> <span class="token variable">@author</span> changsheng
 <span class="token operator">*</span><span class="token operator">/</span>
@<span class="token function">ApiModel</span><span class="token punctuation">(</span><span class="token string">"API结果返回类"</span><span class="token punctuation">)</span>
<span class="token variable">@Data</span>
public class ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span> {

    @<span class="token function">ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">)</span>
    private Integer code<span class="token comment" spellcheck="true">;</span>

    @<span class="token function">ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"描述信息"</span><span class="token punctuation">)</span>
    private String msg<span class="token comment" spellcheck="true">;</span>

    @<span class="token function">ApiModelProperty</span><span class="token punctuation">(</span><span class="token string">"数据"</span><span class="token punctuation">)</span>
    private T data<span class="token comment" spellcheck="true">;</span>

    public <span class="token function">ApiResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> {
    }

    public <span class="token function">ApiResult</span><span class="token punctuation">(</span>Integer code<span class="token punctuation">,</span> String msg<span class="token punctuation">)</span> {
        this<span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token comment" spellcheck="true">;</span>
        this<span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token comment" spellcheck="true">;</span>
    }

    public <span class="token function">ApiResult</span><span class="token punctuation">(</span>Integer code<span class="token punctuation">,</span> String msg<span class="token punctuation">,</span> T data<span class="token punctuation">)</span> {
        this<span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token comment" spellcheck="true">;</span>
        this<span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token comment" spellcheck="true">;</span>
        this<span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 操作成功，返回成功信息
     <span class="token operator">*</span>
     <span class="token operator">*</span> <span class="token variable">@return</span> 结果
     <span class="token operator">*</span><span class="token operator">/</span>
    public ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> {
        return new ApiResult<span class="token operator">&lt;></span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"成功"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 操作警告，返回警告信息
     <span class="token operator">*</span>
     <span class="token operator">*</span> <span class="token variable">@param</span> msg 警告信息
     <span class="token operator">*</span> <span class="token variable">@return</span> 结果
     <span class="token operator">*</span><span class="token operator">/</span>
    public ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">warn</span><span class="token punctuation">(</span>String msg<span class="token punctuation">)</span> {
        return new ApiResult<span class="token operator">&lt;></span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 操作失败，返回失败信息
     <span class="token operator">*</span>
     <span class="token operator">*</span> <span class="token variable">@param</span> msg 失败信息
     <span class="token operator">*</span> <span class="token variable">@return</span> 结果
     <span class="token operator">*</span><span class="token operator">/</span>
    public ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">error</span><span class="token punctuation">(</span>String msg<span class="token punctuation">)</span> {
        return new ApiResult<span class="token operator">&lt;></span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 操作成功，返回数据
     <span class="token operator">*</span>
     <span class="token operator">*</span> <span class="token variable">@param</span> data 数据
     <span class="token operator">*</span> <span class="token variable">@return</span> 结果
     <span class="token operator">*</span><span class="token operator">/</span>
    public ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">success</span><span class="token punctuation">(</span>T data<span class="token punctuation">)</span> {
        return new ApiResult<span class="token operator">&lt;></span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"成功"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

}</pre></div></details><details class="wolai-block"><summary><div class="marker"></div><span>返回工具类</span></summary><div class="wolai-block wolai-text"><div><span>通过该工具类，可以很方便的返回对象</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
 <span class="token operator">*</span> API结果返回类 的工具类
 <span class="token operator">*</span>
 <span class="token operator">*</span> <span class="token variable">@author</span> changsheng
 <span class="token operator">*</span><span class="token operator">/</span>
public class ApiUtil {

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 操作成功，返回成功信息
     <span class="token operator">*</span>
     <span class="token operator">*</span> <span class="token variable">@return</span> 结果
     <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> {
        return new ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 操作警告，返回警告信息
     <span class="token operator">*</span>
     <span class="token operator">*</span> <span class="token variable">@param</span> msg 警告信息
     <span class="token operator">*</span> <span class="token variable">@return</span> 结果
     <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">warn</span><span class="token punctuation">(</span>String msg<span class="token punctuation">)</span> {
        return new ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 操作失败，返回失败信息
     <span class="token operator">*</span>
     <span class="token operator">*</span> <span class="token variable">@param</span> msg 失败信息
     <span class="token operator">*</span> <span class="token variable">@return</span> 结果
     <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">error</span><span class="token punctuation">(</span>String msg<span class="token punctuation">)</span> {
        return new ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span>
     <span class="token operator">*</span> 操作成功，返回数据
     <span class="token operator">*</span>
     <span class="token operator">*</span> <span class="token variable">@param</span> data 数据
     <span class="token operator">*</span> <span class="token variable">@return</span> 结果
     <span class="token operator">*</span><span class="token operator">/</span>
    public <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token function">success</span><span class="token punctuation">(</span>T data<span class="token punctuation">)</span> {
        return new ApiResult<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
}</pre></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/web.html"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;Web&nbsp;Servlet&nbsp;</span></a></span></div></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>网站响应式（Web&nbsp;Reactive）</span></summary><div data-checked="false" class="wolai-block wolai-task-block"><input type="checkbox" disabled=""/><div class="marker"></div><span class="wrapper"><span>TODO&nbsp;有时间了解一下该技术</span></span></div><details class="wolai-block"><summary><div class="marker"></div><span>Spring&nbsp;WebFlux</span></summary><details class="wolai-block"><summary><div class="marker"></div><span>概念</span></summary><div class="wolai-block wolai-text"><div><span>Spring&nbsp;WebFlux&nbsp;是&nbsp;Spring&nbsp;Framework&nbsp;5.0<span class="jill"></span>中引入的新的响应式<span class="jill"></span>web<span class="jill"></span>框架。与<span class="jill"></span>Spring&nbsp;MVC<span class="jill"></span>不同，它不需要<span class="jill"></span>Servlet&nbsp;API，是完全异步且非阻塞的，并且通过<span class="jill"></span>Reactor<span class="jill"></span>项目实现了<span class="jill"></span>Reactive&nbsp;Streams<span class="jill"></span>规范。</span></div></div><div class="wolai-block wolai-text"><div><span>【spring-webmvc&nbsp;+&nbsp;Servlet&nbsp;+&nbsp;Tomcat】命令式的、同步阻塞的</span></div></div><div class="wolai-block wolai-text"><div><span>【spring-webflux&nbsp;+&nbsp;Reactor&nbsp;+&nbsp;Netty】响应式的、异步非阻塞的</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span>官网图</span></summary><div class="wolai-block wolai-center"><figure><img src="media/image_33.png" style="width: 536px"/></figure></div></details></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://zhuanlan.zhihu.com/p/92460075"><span>外行人都能看得懂的<span class="jill"></span>WebFlux</span></a></span></div></div></details></details></details><details class="wolai-block"><summary><div class="marker"></div><span>参考</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://spring.io/projects/spring-framework"><span>Spring&nbsp;Framework<span class="jill"></span>官网</span></a></span></div></div><div class="wolai-block wolai-text"><div><span><a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference"><span>Spring&nbsp;Framework&nbsp;中文文档&nbsp;-&nbsp;5.1.3.RELEASE</span></a></span></div></div></details><hr class="wolai-block"/><details class="wolai-block"><summary><div class="marker placeholder"></div><span>面试题</span></summary></details><div class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>