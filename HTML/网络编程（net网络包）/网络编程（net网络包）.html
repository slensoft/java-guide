<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../css/wolai.css"/><title>网络编程（net网络包） - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="small-font"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="网络编程（net网络包）" class="main-title"></div></div></header><article><details class="wolai-block"><summary><div class="marker"></div><span>传输协议</span></summary><div class="wolai-block wolai-text"><div><span><a href="https://www.wolai.com/9DRdEPDWuKbKtXDEWDskWs#p32pAa7uQsf73sSkSP3PqP" class="wolai-bi-link"><span><span class="embed-jiu embed-toggle"></span><span>计算机网络</span></span></a></span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>常用类</span></summary><div class="wolai-block wolai-text"><div><span>InterAddress：此类表示互联网协议&nbsp;(IP)&nbsp;地址</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>InetAddress ia <span class="token operator">=</span> InetAddress<span class="token punctuation">.</span><span class="token function">getLocalHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">; // 获取本机信息</span>
InetAddress domainName <span class="token operator">=</span> InetAddress<span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"www.baidu.com"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">; // 使用域名获取信息</span></pre></div><div class="wolai-block wolai-text"><div><span>InetSocketAddress&nbsp;:此类实现&nbsp;IP&nbsp;套接字地址（IP&nbsp;地址&nbsp;+&nbsp;端口号）。该类表示端口</span></div></div><div class="wolai-block wolai-text"><div><span>URL<span class="jill"></span>类：&nbsp;URL&nbsp;代表一个统一资源定位符</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span>UDP</span></summary><div class="wolai-block wolai-text"><div><span>UDP：Internet&nbsp;协议集支持一个无连接的传输协议，该协议称为用户数据报协议（UDP，User&nbsp;Datagram&nbsp;Protocol）。UDP&nbsp;为应用程序提供了一种无需建立连接就可以发送封装的&nbsp;IP&nbsp;数据报的方法。</span></div></div><div class="wolai-block wolai-text"><div><span>用数据包（DatagramPacket）传输（DatagramSocke）</span></div></div><div class="wolai-block wolai-text"><div><span>DatagramSocket：此类表示用来发送和接收数据报包的套接字（作用：应用层与传输层的通讯）</span></div></div><div class="wolai-block wolai-text"><div><span>DatagramPacket<span class="jill"></span>数据包：此类表示数据报包，该类构造器中有接收和发送的构造器，数据</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>TCP</span></summary><div class="wolai-block wolai-text"><div><span>TCP：输控制协议（TCP，Transmission&nbsp;Control&nbsp;Protocol）是一种面向连接的、可靠的、基于字节流的传输层通信协议。</span></div></div><div class="wolai-block wolai-text"><div><span>注：使用基于<span class="jill"></span>TCP<span class="jill"></span>协议的<span class="jill"></span>Socket<span class="jill"></span>网络编程实现。用<span class="jill"></span>lO<span class="jill"></span>流实现数据输出</span></div></div><div class="wolai-block wolai-text"><div><span>扩展：HTTP<span class="jill"></span>协议底层使用的也是<span class="jill"></span>TCP<span class="jill"></span>协议，TCP<span class="jill"></span>是请求-响应式的<span class="jill"></span>request&nbsp;response</span></div></div><div class="wolai-block wolai-text"><div><span>服务器端：ServerSocket</span></div></div><div class="wolai-block wolai-text"><div><span>客户端：Socket</span></div></div><div class="wolai-block wolai-text"><div><span>传输使用<span class="jill"></span>IO<span class="jill"></span>操作</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span>代码示例</span></summary><div class="wolai-block wolai-text"><div><span>URL&nbsp;编码解码：URL&nbsp;Decoder&nbsp;&nbsp;和&nbsp;URL&nbsp;Encoder</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>    try {  
            <span class="token operator">/</span><span class="token operator">/</span> 将application<span class="token operator">/</span>x<span class="token operator">-</span>www<span class="token operator">-</span>from<span class="token operator">-</span>urlencoded字符串转换成普通字符串    
            String keyWord <span class="token operator">=</span> URLDecoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token string">"<span class="token variable">%C4%</span>E3<span class="token variable">%BA%</span>C3"</span><span class="token punctuation">,</span> <span class="token string">"GBK"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;    </span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>keyWord<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;  //输出你好  </span>
            <span class="token operator">/</span><span class="token operator">/</span> 将普通字符创转换成application<span class="token operator">/</span>x<span class="token operator">-</span>www<span class="token operator">-</span>from<span class="token operator">-</span>urlencoded字符串    
            String urlString <span class="token operator">=</span> URLEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"你好"</span><span class="token punctuation">,</span> <span class="token string">"GBK"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;  //输出%C4%E3%BA%C3  </span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>urlString<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;  </span>
        } catch <span class="token punctuation">(</span>UnsupportedEncodingException e<span class="token punctuation">)</span> {  
            <span class="token operator">/</span><span class="token operator">/</span> TODO Auto<span class="token operator">-</span>generated catch block  
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;  </span>
        } </pre></div><div class="wolai-block wolai-text"><div><span>发送<span class="jill"></span>http<span class="jill"></span>请求实现聊天机器人</span></div></div><div class="wolai-block wolai-pre"><div data-lang="Java" class="marker"></div><pre>    <span class="token operator">/</span><span class="token operator">/</span> 将普通字符创转换成application<span class="token operator">/</span>x<span class="token operator">-</span>www<span class="token operator">-</span>from<span class="token operator">-</span>urlencoded字符串    
    String urlQuestion<span class="token operator">=</span>URLEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"你上学吗？"</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token operator">/</span><span class="token operator">/</span> URL
    URL url <span class="token operator">=</span> new <span class="token function">URL</span><span class="token punctuation">(</span><span class="token string">"https://api.ownthink.com/bot?appid=xiaosi&amp;userid=user&amp;spoken="</span> <span class="token operator">+</span> urlQuestion<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token operator">/</span><span class="token operator">/</span> 打开连接
    HttpURLConnection huc <span class="token operator">=</span> <span class="token punctuation">(</span>HttpURLConnection<span class="token punctuation">)</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token operator">/</span><span class="token operator">/</span> 设置请求和请求的浏览器（User<span class="token operator">-</span>Agent：用户代理指代浏览器）
    huc<span class="token punctuation">.</span><span class="token function">setRequestMethod</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    huc<span class="token punctuation">.</span><span class="token function">setRequestProperty</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">,</span> "Mozilla<span class="token operator">/</span><span class="token number">5.0</span> <span class="token punctuation">(</span>Windows NT <span class="token number">10.0</span><span class="token comment" spellcheck="true">; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.97 Safari/537.36");</span>
    <span class="token operator">/</span><span class="token operator">/</span> 打开输入流<span class="token operator">+</span>字节转换字符<span class="token operator">+</span>缓冲流
    BufferedReader br <span class="token operator">=</span> new <span class="token function">BufferedReader</span><span class="token punctuation">(</span>new <span class="token function">InputStreamReader</span><span class="token punctuation">(</span>huc<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token operator">/</span><span class="token operator">/</span> 遍历
    String line <span class="token operator">=</span> <span class="token keyword">null</span><span class="token comment" spellcheck="true">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> !<span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> {
      System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }  
    <span class="token operator">/</span><span class="token operator">/</span> 关闭流
    br<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span></pre></div></details></details><div class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>